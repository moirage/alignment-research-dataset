<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><script src="The%20Paths%20Perspective%20on%20Value%20Learning_files/template.js"></script><style>body {transition: opacity ease-in 0.2s; } 
body[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } 
</style><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><script async="" src="The%20Paths%20Perspective%20on%20Value%20Learning_files/analytics.js"></script><script>
window.addEventListener('WebComponentsReady', function() {
  console.warn('WebComponentsReady');
  const loaderTag = document.createElement('script');
  loaderTag.src = 'https://distill.pub/template.v2.js';
  document.head.insertBefore(loaderTag, document.head.firstChild);
});
</script><script src="The%20Paths%20Perspective%20on%20Value%20Learning_files/webcomponents-loader.js"></script><script src="The%20Paths%20Perspective%20on%20Value%20Learning_files/webcomponents-hi.js"></script>
  
  
  <style id="distill-prerendered-styles" type="text/css">/*
 * Copyright 2018 The Distill Template Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

html {
  font-size: 14px;
	line-height: 1.6em;
  /* font-family: "Libre Franklin", "Helvetica Neue", sans-serif; */
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  /*, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";*/
  text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
}

@media(min-width: 768px) {
  html {
    font-size: 16px;
  }
}

body {
  margin: 0;
}

a {
  color: #004276;
}

figure {
  margin: 0;
}

table {
	border-collapse: collapse;
	border-spacing: 0;
}

table th {
	text-align: left;
}

table thead {
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

table thead th {
  padding-bottom: 0.5em;
}

table tbody :first-child td {
  padding-top: 0.5em;
}

pre {
  overflow: auto;
  max-width: 100%;
}

p {
  margin-top: 0;
  margin-bottom: 1em;
}

sup, sub {
  vertical-align: baseline;
  position: relative;
  top: -0.4em;
  line-height: 1em;
}

sub {
  top: 0.4em;
}

.kicker,
.marker {
  font-size: 15px;
  font-weight: 600;
  color: rgba(0, 0, 0, 0.5);
}


/* Headline */

@media(min-width: 1024px) {
  d-title h1 span {
    display: block;
  }
}

/* Figure */

figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

figcaption+figure {

}

figure img {
  width: 100%;
}

figure svg text,
figure svg tspan {
}

figcaption,
.figcaption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

@media(min-width: 1024px) {
figcaption,
.figcaption {
    font-size: 13px;
  }
}

figure.external img {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

figcaption a {
  color: rgba(0, 0, 0, 0.6);
}

figcaption b,
figcaption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}
/*
 * Copyright 2018 The Distill Template Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

@supports not (display: grid) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    display: block;
    padding: 8px;
  }
}

.base-grid,
distill-header,
d-title,
d-abstract,
d-article,
d-appendix,
distill-appendix,
d-byline,
d-footnote-list,
d-citation-list,
distill-footer {
  display: grid;
  justify-items: stretch;
  grid-template-columns: [screen-start] 8px [page-start kicker-start text-start gutter-start middle-start] 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr [text-end page-end gutter-end kicker-end middle-end] 8px [screen-end];
  grid-column-gap: 8px;
}

.grid {
  display: grid;
  grid-column-gap: 8px;
}

@media(min-width: 768px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start middle-start text-start] 45px 45px 45px 45px 45px 45px 45px 45px [ kicker-end text-end gutter-start] 45px [middle-end] 45px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }
}

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 50px [middle-start] 50px [text-start kicker-end] 50px 50px 50px 50px 50px 50px 50px 50px [text-end gutter-start] 50px [middle-end] 50px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}




.base-grid {
  grid-column: screen;
}

/* .l-body,
d-article > *  {
  grid-column: text;
}

.l-page,
d-title > *,
d-figure {
  grid-column: page;
} */

.l-gutter {
  grid-column: gutter;
}

.l-text,
.l-body {
  grid-column: text;
}

.l-page {
  grid-column: page;
}

.l-body-outset {
  grid-column: middle;
}

.l-page-outset {
  grid-column: page;
}

.l-screen {
  grid-column: screen;
}

.l-screen-inset {
  grid-column: screen;
  padding-left: 16px;
  padding-left: 16px;
}


/* Aside */

d-article aside {
  grid-column: gutter;
  font-size: 12px;
  line-height: 1.6em;
  color: rgba(0, 0, 0, 0.6)
}

@media(min-width: 768px) {
  aside {
    grid-column: gutter;
  }

  .side {
    grid-column: gutter;
  }
}
/*
 * Copyright 2018 The Distill Template Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

d-title {
  padding: 2rem 0 1.5rem;
  contain: layout style;
  overflow-x: hidden;
}

@media(min-width: 768px) {
  d-title {
    padding: 4rem 0 1.5rem;
  }
}

d-title h1 {
  grid-column: text;
  font-size: 40px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

@media(min-width: 768px) {
  d-title h1 {
    font-size: 50px;
  }
}

d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  grid-column: text;
}

d-title .status {
  margin-top: 0px;
  font-size: 12px;
  color: #009688;
  opacity: 0.8;
  grid-column: kicker;
}

d-title .status span {
  line-height: 1;
  display: inline-block;
  padding: 6px 0;
  border-bottom: 1px solid #80cbc4;
  font-size: 11px;
  text-transform: uppercase;
}
/*
 * Copyright 2018 The Distill Template Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

d-byline {
  contain: style;
  overflow: hidden;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  font-size: 0.8rem;
  line-height: 1.8em;
  padding: 1.5rem 0;
  min-height: 1.8em;
}


d-byline .byline {
  grid-template-columns: 1fr 1fr;
  grid-column: text;
}

@media(min-width: 768px) {
  d-byline .byline {
    grid-template-columns: 1fr 1fr 1fr 1fr;
  }
}

d-byline .authors-affiliations {
  grid-column-end: span 2;
  grid-template-columns: 1fr 1fr;
  margin-bottom: 1em;
}

@media(min-width: 768px) {
  d-byline .authors-affiliations {
    margin-bottom: 0;
  }
}

d-byline h3 {
  font-size: 0.6rem;
  font-weight: 400;
  color: rgba(0, 0, 0, 0.5);
  margin: 0;
  text-transform: uppercase;
}

d-byline p {
  margin: 0;
}

d-byline a,
d-article d-byline a {
  color: rgba(0, 0, 0, 0.8);
  text-decoration: none;
  border-bottom: none;
}

d-article d-byline a:hover {
  text-decoration: underline;
  border-bottom: none;
}

d-byline p.author {
  font-weight: 500;
}

d-byline .affiliations {

}
/*
 * Copyright 2018 The Distill Template Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

d-article {
  contain: layout style;
  overflow-x: hidden;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  padding-top: 2rem;
  color: rgba(0, 0, 0, 0.8);
}

d-article > * {
  grid-column: text;
}

@media(min-width: 768px) {
  d-article {
    font-size: 16px;
  }
}

@media(min-width: 1024px) {
  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
}


/* H2 */


d-article .marker {
  text-decoration: none;
  border: none;
  counter-reset: section;
  grid-column: kicker;
  line-height: 1.7em;
}

d-article .marker:hover {
  border: none;
}

d-article .marker span {
  padding: 0 3px 4px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  position: relative;
  top: 4px;
}

d-article .marker:hover span {
  color: rgba(0, 0, 0, 0.7);
  border-bottom: 1px solid rgba(0, 0, 0, 0.7);
}

d-article h2 {
  font-weight: 600;
  font-size: 24px;
  line-height: 1.25em;
  margin: 2rem 0 1.5rem 0;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding-bottom: 1rem;
}

@media(min-width: 1024px) {
  d-article h2 {
    font-size: 36px;
  }
}

/* H3 */

d-article h3 {
  font-weight: 700;
  font-size: 18px;
  line-height: 1.4em;
  margin-bottom: 1em;
  margin-top: 2em;
}

@media(min-width: 1024px) {
  d-article h3 {
    font-size: 20px;
  }
}

/* H4 */

d-article h4 {
  font-weight: 600;
  text-transform: uppercase;
  font-size: 14px;
  line-height: 1.4em;
}

d-article a {
  color: inherit;
}

d-article p,
d-article ul,
d-article ol,
d-article blockquote {
  margin-top: 0;
  margin-bottom: 1em;
  margin-left: 0;
  margin-right: 0;
}

d-article blockquote {
  border-left: 2px solid rgba(0, 0, 0, 0.2);
  padding-left: 2em;
  font-style: italic;
  color: rgba(0, 0, 0, 0.6);
}

d-article a {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  text-decoration: none;
}

d-article a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.8);
}

d-article .link {
  text-decoration: underline;
  cursor: pointer;
}

d-article ul,
d-article ol {
  padding-left: 24px;
}

d-article li {
  margin-bottom: 1em;
  margin-left: 0;
  padding-left: 0;
}

d-article li:last-child {
  margin-bottom: 0;
}

d-article pre {
  font-size: 14px;
  margin-bottom: 20px;
}

d-article hr {
  grid-column: screen;
  width: 100%;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  margin-top: 60px;
  margin-bottom: 60px;
}

d-article section {
  margin-top: 60px;
  margin-bottom: 60px;
}

d-article span.equation-mimic {
  font-family: georgia;
  font-size: 115%;
  font-style: italic;
}

d-article > d-code,
d-article section > d-code  {
  display: block;
}

d-article > d-math[block],
d-article section > d-math[block]  {
  display: block;
}

@media (max-width: 768px) {
  d-article > d-code,
  d-article section > d-code,
  d-article > d-math[block],
  d-article section > d-math[block] {
      overflow-x: scroll;
      -ms-overflow-style: none;  // IE 10+
      overflow: -moz-scrollbars-none;  // Firefox
  }

  d-article > d-code::-webkit-scrollbar,
  d-article section > d-code::-webkit-scrollbar,
  d-article > d-math[block]::-webkit-scrollbar,
  d-article section > d-math[block]::-webkit-scrollbar {
    display: none;  // Safari and Chrome
  }
}

d-article .citation {
  color: #668;
  cursor: pointer;
}

d-include {
  width: auto;
  display: block;
}

d-figure {
  contain: layout style;
}

/* KaTeX */

.katex, .katex-prerendered {
  contain: style;
  display: inline-block;
}

/* Tables */

d-article table {
  border-collapse: collapse;
  margin-bottom: 1.5rem;
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
}

d-article table th {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
}

d-article table td {
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

d-article table tr:last-of-type td {
  border-bottom: none;
}

d-article table th,
d-article table td {
  font-size: 15px;
  padding: 2px 8px;
}

d-article table tbody :first-child td {
  padding-top: 2px;
}
/*
 * Copyright 2018 The Distill Template Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

span.katex-display {
  text-align: left;
  padding: 8px 0 8px 0;
  margin: 0.5em 0 0.5em 1em;
}

span.katex {
  -webkit-font-smoothing: antialiased;
  color: rgba(0, 0, 0, 0.8);
  font-size: 1.18em;
}
/*
 * Copyright 2018 The Distill Template Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

@media print {

  @page {
    size: 8in 11in;
    @bottom-right {
      content: counter(page) " of " counter(pages);
    }
  }

  html {
    /* no general margins -- CSS Grid takes care of those */
  }

  p, code {
    page-break-inside: avoid;
  }

  h2, h3 {
    page-break-after: avoid;
  }

  d-header {
    visibility: hidden;
  }

  d-footer {
    display: none!important;
  }

}
</style>
  <style>/* Hero Layout */

#compare-caption {
	grid-column: kicker;
	border-top: solid 1px rgba(0, 0, 0, 0.1);
	padding-top: 1rem;
	margin-top: 0;
}
#compare-figure {
	border-top: solid 1px rgba(0, 0, 0, 0.1);
	padding-top: 1rem;
	margin-top: 0;
}
#compare_play_button {
	margin-left: 20px;
	padding: 0 8px;
	background-color: rgba(255, 130, 0);
	border-radius: 4px;
	border: none;
	color: white;
	height: 32px;
	font-size: 13px;
	text-transform: uppercase;
	width: 100px;
}
#compare_play_button[disabled] {
	opacity: 0.5;
}

d-title {
	padding-bottom: 0.5rem;
}

figure#compare-figure {
	grid-column: text;
	display: grid;
	grid-column-gap: inherit;
	grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
	margin-bottom: 0;
}

#compare-figure svg {
	width: 100%;
	height: auto;
}

#compare-figure h4 {
	margin: 0 0 0.5em 0;
}

#compare-figure d-math span.katex-display {
	padding: 0;
	margin: 0;
}

#cliffworld-mc > div {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
	grid-gap: 20px;
}

figure {
	overflow-x: scroll;
}

figure figcaption,
figure .figcaption {
	margin-bottom: 1em;
}

figure .column-heading {
	border-bottom: 1px solid rgba(0, 0, 0, 0.1);
	padding-bottom: 8px;
	margin: 0;
}

/* Pre-existing CSS */

#cliffworld-td {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
	grid-gap: 20px;
}

#cliffworld-trajectories {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
	grid-gap: 20px;
}

#cliff_iter .cell rect {
	fill: #eee;
}

.cell rect {
	fill: #eee;
}

.eq-grid {
	grid-column: text-start / end;
	padding: 10px;
	display: grid;
	justify-content: start;
	grid-row-gap: 10px;
	overflow-x: scroll;
	margin-bottom: 1em;
}
.eq-grid d-math {
	font-size: 120%;
}
.eq-grid figcaption d-math {
	font-size: 100%;
}
.eq-grid figcaption {
}
.eq-grid .expansion-marker {
	border: 1px solid #ccc;
	border-bottom: none;
	height: 6px;
	width: 100%;
	margin-top: 6px;
	margin-bottom: 6px;
}
.eq-grid .faded {
	opacity: 0.5;
}

svg {
	user-select: none;
}

.two-column-math img {
	margin-bottom: 1em;
}
@media (min-width: 768px) {
	.two-column-math img {
		margin-bottom: initial;
	}
	.two-column-math .wrapper {
		margin: 0 auto;
		display: grid;
		grid-template-columns: 0.4fr 1fr;
		grid-auto-flow: row;
		grid-gap: 1em;
	}
}
</style>
  <style type="text/css">@import "vis/playground.css";</style>

  <script src="The%20Paths%20Perspective%20on%20Value%20Learning_files/d3.js" charset="utf-8"></script>
  <script src="The%20Paths%20Perspective%20on%20Value%20Learning_files/underscore.js" charset="utf-8"></script>
  <script src="The%20Paths%20Perspective%20on%20Value%20Learning_files/rounding.js" charset="utf-8"></script>
  <script src="The%20Paths%20Perspective%20on%20Value%20Learning_files/util.js" charset="utf-8"></script>
  <script src="The%20Paths%20Perspective%20on%20Value%20Learning_files/GridWorld.js" charset="utf-8"></script>
  <script src="The%20Paths%20Perspective%20on%20Value%20Learning_files/LearnQV.js" charset="utf-8"></script>

  <script src="The%20Paths%20Perspective%20on%20Value%20Learning_files/compare.js" charset="utf-8"></script>

<link rel="stylesheet" href="The%20Paths%20Perspective%20on%20Value%20Learning_files/katex.css" crossorigin="anonymous">
    
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA99JREFUeNrsG4t1ozDMzQSM4A2ODUonKBucN2hugtIJ6E1AboLcBiQTkJsANiAb9OCd/OpzMWBJBl5TvaeXPiiyJetry0J8wW3D3QpjRh3GjneXDq+fSQA9s2mH9x3KDhN4foJfCb8N/Jrv+2fnDn8vLRQOplWHVYdvHZYdZsBcZP1vBmh/n8DzEmhUQDPaOuP9pFuY+JwJHwHnCLQE2tnWBGEyXozY9xCUgHMhhjE2I4heVWtgIkZ83wL6Qgxj1obfWBxymPwe+b00BCCRNPbwfb60yleAkkBHGT5AEehIYz7eJrFDMF9CvH4wwhcGHiHMneFvLDQwlwvMLQq58trRcYBWfYn0A0OgHWQUSu25mE+BnoYKnnEJoeIWAifzOv7vLWd2ZKRfWAIme3tOiUaQ3UnLkb0xj1FxRIeEGKaGIHOs9nEgLaaA9i0JRYo1Ic67wJW86KSKE/ZAM8KuVMk8ITVhmxUxJ3Cl2xlm9Vtkeju1+mpCQNxaEGNCY8bs9X2YqwNoQeGjBWut/ma0QAWy/TqAsHx9wSya3I5IRxOfTC+leG+kA/4vSeEcGBtNUN6byhu3+keEZCQJUNh8MAO7HL6H8pQLnsW/Hd4T4lv93TPjfM7A46iEEqbB5EDOvwYNW6tGNZzT/o+CZ6sqZ6wUtR/wf7mi/VL8iNciT6rHih48Y55b4nKCHJCCzb4y0nwFmin3ZEMIoLfZF8F7nncFmvnWBaBj7CGAYA/WGJsUwHdYqVDwAmNsUgAx4CGgAA7GOOxADYOFWOaIKifuVYzmOpREqA21Mo7aPsgiY1PhOMAmxtR+AUbYH3Id2wc0SAFIQTsn9IUGWR8k9jx3vtXSiAacFxTAGakBk9UudkNECd6jLe+6HrshshvIuC6IlLMRy7er+JpcKma24SlE4cFZSZJDGVVrsNvitQhQrDhW0jfiOLfFd47C42eHT56D/BK0To+58Ahj+cAT8HT1UWlfLZCCd/uKawzU0Rh2EyIX/Icqth3niG8ybNroezwe6khdCNxRN+l4XGdOLVLlOOt2hTRJlr1ETIuMAltVTMz70mJrkdGAaZLSmnBEqmAE32JCMmuTlCnRgsBENtOUpHhvvsYIL0ibnBkaC6QvKcR7738GKp0AKnim7xgUSNv1bpS8QwhBt8r+EP47v/oyRK/S34yJ9nT+AN0Tkm4OdB9E4BsmXM3SnMlRFUrtp6IDpV2eKzdYvF3etm3KhQksbOLChGkSmcBdmcEwvqkrMy5BzL00NZeu3qPYJOOuCc+5NjcWKXQxFvTa3NoXJ4d8in7fiAUuTt781dkvuHX4K8AA2Usy7yNKLy0AAAAASUVORK5CYII=">
    <link href="https://distill.pub/rss.xml" rel="alternate" type="application/rss+xml" title="Articles from Distill">
  
    <title>The Paths Perspective on Value Learning</title>
    
    <link rel="canonical" href="https://distill.pub/2019/paths-perspective-on-value-learning">
    
    <!--  https://schema.org/Article -->
    <meta property="description" itemprop="description" content="A closer look at how Temporal Difference Learning merges paths of experience for greater statistical efficiency">
    <meta property="article:published" itemprop="datePublished" content="2019-09-30">
    <meta property="article:created" itemprop="dateCreated" content="2019-09-30">
    
    <meta property="article:modified" itemprop="dateModified" content="2019-11-12T19:27:28.000Z">
    
    <meta property="article:author" content="Sam Greydanus">
    <meta property="article:author" content="Chris Olah">
    <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="The Paths Perspective on Value Learning">
    <meta property="og:description" content="A closer look at how Temporal Difference Learning merges paths of experience for greater statistical efficiency">
    <meta property="og:url" content="https://distill.pub/2019/paths-perspective-on-value-learning">
    <meta property="og:image" content="https://distill.pub/2019/paths-perspective-on-value-learning/thumbnail.jpg">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="Distill">
  
    <!--  https://dev.twitter.com/cards/types/summary -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="The Paths Perspective on Value Learning">
    <meta name="twitter:description" content="A closer look at how Temporal Difference Learning merges paths of experience for greater statistical efficiency">
    <meta name="twitter:url" content="https://distill.pub/2019/paths-perspective-on-value-learning">
    <meta name="twitter:image" content="https://distill.pub/2019/paths-perspective-on-value-learning/thumbnail.jpg">
    <meta name="twitter:image:width" content="560">
    <meta name="twitter:image:height" content="295">
  
      <!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
    <meta name="citation_title" content="The Paths Perspective on Value Learning">
    <meta name="citation_fulltext_html_url" content="https://distill.pub/2019/paths-perspective-on-value-learning">
    <meta name="citation_volume" content="4">
    <meta name="citation_issue" content="9">
    <meta name="citation_firstpage" content="e20">
    <meta name="citation_doi" content="10.23915/distill.00020">
    <meta name="citation_journal_title" content="Distill">
    <meta name="citation_journal_abbrev" content="Distill">
    <meta name="citation_issn" content="2476-0757">
    <meta name="citation_fulltext_world_readable" content="">
    <meta name="citation_online_date" content="2019/09/30">
    <meta name="citation_publication_date" content="2019/09/30">
    <meta name="citation_author" content="Greydanus, Sam">
    <meta name="citation_author_institution" content="Google Brain">
    <meta name="citation_author" content="Olah, Chris">
    <meta name="citation_author_institution" content="OpenAI">
    <meta name="citation_reference" content="citation_title=Reinforcement Learning: An Introduction;citation_author=Richard Sutton;citation_author=Andrew Barto;citation_publication_date=2017;">
    <meta name="citation_reference" content="citation_title=Double Q-learning;citation_author=Hado Van Hasselt;citation_publication_date=2010;citation_journal_title=Advances in Neural Information Processing Systems;">
    <meta name="citation_reference" content="citation_title=Universal Planning Networks;citation_author=Aravind Srinivas;citation_author=Allan Jabri;citation_author=Pieter Abbeel;citation_author=Sergey Levine;citation_author=Chelsea Finn;citation_publication_date=2018;citation_arxiv_id=1804.00645;">
    <meta name="citation_reference" content="citation_title=Mastering the game of go without human knowledge;citation_author=David Silver;citation_author=Julian Schrittwieser;citation_author=Karen Simonyan;citation_author=Ioannis Antonoglou;citation_author=Aja Huang;citation_author=Arthur Guez;citation_author=Thomas Hubert;citation_author=Lucas Baker;citation_author=Matthew Lai;citation_author=Adrian Bolton;citation_author= others;citation_publication_date=2017;citation_journal_title=Nature;citation_volume=550;citation_number=7676;">
</head>


<body distill-prerendered="" data-new-gr-c-s-check-loaded="8.899.0" data-gr-ext-installed="" class="vsc-initialized"><distill-header distill-prerendered="">
<style>
distill-header {
  position: relative;
  height: 60px;
  background-color: hsl(200, 60%, 15%);
  width: 100%;
  box-sizing: border-box;
  z-index: 2;
  color: rgba(0, 0, 0, 0.8);
  border-bottom: 1px solid rgba(0, 0, 0, 0.08);
  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.05);
}
distill-header .content {
  height: 70px;
  grid-column: page;
}
distill-header a {
  font-size: 16px;
  height: 60px;
  line-height: 60px;
  text-decoration: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 22px 0;
}
distill-header a:hover {
  color: rgba(255, 255, 255, 1);
}
distill-header svg {
  width: 24px;
  position: relative;
  top: 4px;
  margin-right: 2px;
}
@media(min-width: 1080px) {
  distill-header {
    height: 70px;
  }
  distill-header a {
    height: 70px;
    line-height: 70px;
    padding: 28px 0;
  }
  distill-header .logo {
  }
}
distill-header svg path {
  fill: none;
  stroke: rgba(255, 255, 255, 0.8);
  stroke-width: 3px;
}
distill-header .logo {
  font-size: 17px;
  font-weight: 200;
}
distill-header .nav {
  float: right;
  font-weight: 300;
}
distill-header .nav a {
  font-size: 12px;
  margin-left: 24px;
  text-transform: uppercase;
}
</style>
<div class="content">
  <a href="https://distill.pub/" class="logo">
    <svg viewBox="-607 419 64 64">
  <path d="M-573.4,478.9c-8,0-14.6-6.4-14.6-14.5s14.6-25.9,14.6-40.8c0,14.9,14.6,32.8,14.6,40.8S-565.4,478.9-573.4,478.9z"></path>
</svg>

    Distill
  </a>
  <nav class="nav">
    <a href="https://distill.pub/about/">About</a>
    <a href="https://distill.pub/prize/">Prize</a>
    <a href="https://distill.pub/journal/">Submit</a>
  </nav>
</div>
</distill-header>

<d-front-matter>
  <script type="text/json">{
  "title": "The Paths Perspective on Value Learning",
  "description": "A closer look at how Temporal Difference Learning merges paths of experience for greater statistical efficiency",
  "authors": [

    {
      "author": "Sam Greydanus",
      "authorURL": "https://greydanus.github.io/about.html",
      "affiliation": "Google Brain",
      "affiliationURL": "https://g.co/brain"
    },

    {
      "author": "Chris Olah",
      "authorURL": "https://colah.github.io/",
      "affiliation": "OpenAI",
      "affiliationURL": "https://g.co/brain"
    }
  ],
  "katex": {
    "strict": false,
    "delimiters": [
      {
        "left": "$",
        "right": "$",
        "display": false
      },
      {
        "left": "$$",
        "right": "$$",
        "display": true
      }
    ]
  }
  }</script>
</d-front-matter>

<d-title>
  <h1>The Paths Perspective on Value Learning</h1>
  <p>
    A closer look at how Temporal Difference learning merges paths of experience for greater statistical efficiency.
  </p>
  <div id="compare-caption">

    <button id="compare_play_button" type="button" style="margin: 0 0 1rem;">Play</button>
    <div class="figcaption">
      These value estimators behave differently where paths of experience intersect.
    </div>
  </div>
  <figure id="compare-figure" style="grid-column: text-start/page-end; overflow-x: visible">
    <div id="MC">
        <svg width="380" height="380" viewBox="0 0 380 380"><g class="env" transform="translate(38,38)"><g class="background"><g class="cell s-0-0" transform="translate(0,0)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-1-0" transform="translate(76,0)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-2-0" transform="translate(152,0)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-0-1" transform="translate(0,76)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-1-1" transform="translate(76,76)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-2-1" transform="translate(152,76)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-3-1" transform="translate(228,76)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-0-2" transform="translate(0,152)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-1-2" transform="translate(76,152)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-2-2" transform="translate(152,152)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-3-2" transform="translate(228,152)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-0-3" transform="translate(0,228)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-1-3" transform="translate(76,228)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-2-3" transform="translate(152,228)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-3-3" transform="translate(228,228)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-0-4" transform="translate(0,304)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-1-4" transform="translate(76,304)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-2-4" transform="translate(152,304)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-3-4" transform="translate(228,304)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g></g><g class="trails"><path class="trail" stroke="#CAC9CC" stroke-width="9.88" fill="none" d=" M 0 152 L 60.8 152 C 68.4 152 76 144.4 76 136.8 L 76 91.2 C 76 83.6 83.6 76 91.2 76 L 136.8 76 C 144.4 76 152 68.4 152 60.8 L 152 15.200000000000001 C 152 7.6000000000000005 159.6 0 167.2 0 L 212.8 0 C 220.4 0 228 0 228 0 L 228 0 " style="opacity: 1;"></path><path class="trail" stroke="#CAC9CC" stroke-width="9.88" fill="none" d=" M 152 304 L 152 243.2 C 152 235.6 152 220.4 152 212.8 L 152 167.2 C 152 159.6 152 144.4 152 136.8 L 152 91.2 C 152 83.6 159.6 76 167.2 76 L 212.8 76 C 220.4 76 235.6 76 243.2 76 L 288.8 76 C 296.4 76 304 76 304 76 L 304 76 " style="opacity: 1;"></path></g><g class="grid"><g class="cell s-0-0" transform="translate(0,0)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-1-0" transform="translate(76,0)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-2-0" transform="translate(152,0)"><g class="V" style="fill: rgb(0, 0, 139); stroke: rgb(0, 0, 139);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-0-1" transform="translate(0,76)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-1-1" transform="translate(76,76)"><g class="V" style="fill: rgb(0, 0, 139); stroke: rgb(0, 0, 139);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-2-1" transform="translate(152,76)"><g class="V" style="fill: rgb(126, 145, 217); stroke: rgb(126, 145, 217);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-3-1" transform="translate(228,76)"><g class="V" style="fill: rgb(189, 95, 55); stroke: rgb(189, 95, 55);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-0-2" transform="translate(0,152)"><g class="V" style="fill: rgb(0, 0, 139); stroke: rgb(0, 0, 139);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-1-2" transform="translate(76,152)"><g class="V" style="fill: rgb(0, 0, 139); stroke: rgb(0, 0, 139);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-2-2" transform="translate(152,152)"><g class="V" style="fill: rgb(189, 95, 55); stroke: rgb(189, 95, 55);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-3-2" transform="translate(228,152)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-0-3" transform="translate(0,228)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-1-3" transform="translate(76,228)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-2-3" transform="translate(152,228)"><g class="V" style="fill: rgb(189, 95, 55); stroke: rgb(189, 95, 55);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-3-3" transform="translate(228,228)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-0-4" transform="translate(0,304)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-1-4" transform="translate(76,304)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-2-4" transform="translate(152,304)"><g class="V" style="fill: rgb(189, 95, 55); stroke: rgb(189, 95, 55);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-3-4" transform="translate(228,304)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g></g><g class="goal_layer"><rect width="60.800000000000004" height="60.800000000000004" transform="translate(197.6,-30.400000000000002)" style="fill: rgb(0, 0, 139);"></rect><rect width="60.800000000000004" height="60.800000000000004" transform="translate(273.59999999999997,-30.400000000000002)" style="fill: rgb(189, 95, 55);"></rect><rect width="60.800000000000004" height="60.800000000000004" transform="translate(273.59999999999997,45.6)" style="fill: rgb(189, 95, 55);"></rect><rect width="60.800000000000004" height="60.800000000000004" transform="translate(273.59999999999997,121.60000000000001)" style="fill: rgb(189, 95, 55);"></rect><rect width="60.800000000000004" height="60.800000000000004" transform="translate(273.59999999999997,197.6)" style="fill: rgb(189, 95, 55);"></rect><rect width="60.800000000000004" height="60.800000000000004" transform="translate(273.59999999999997,273.59999999999997)" style="fill: rgb(189, 95, 55);"></rect><rect width="68.39999999999999" height="372.40000000000003" transform="translate(269.8,-34.199999999999996)" style="fill: rgb(189, 95, 55);"></rect></g><g class="agent_layer"></g><g class="foreground"><text transform="translate(205.20000000000002,7.6000000000000005)" style="fill: rgb(202, 201, 204); font: bold 30px sans-serif;">+2</text><text transform="translate(281.2,83.60000000000001)" style="fill: rgb(202, 201, 204); font: bold 30px sans-serif;">–1</text></g></g></svg>
        <figcaption>
            <h4>Monte Carlo</h4>
            <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mtext>&nbsp;</mtext><mo>↩</mo><mtext>&nbsp;</mtext><msub><mi>R</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">V(s_t) ~\hookleftarrow~ R_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mrel"><span class="mspace">&nbsp;</span><span class="mrel">↩</span></span><span class="mord"><span class="mspace">&nbsp;</span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span></span>
        </figcaption>
    </div>
    <div id="TD">
        <svg width="380" height="380" viewBox="0 0 380 380"><g class="env" transform="translate(38,38)"><g class="background"><g class="cell s-0-0" transform="translate(0,0)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-1-0" transform="translate(76,0)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-2-0" transform="translate(152,0)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-0-1" transform="translate(0,76)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-1-1" transform="translate(76,76)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-2-1" transform="translate(152,76)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-3-1" transform="translate(228,76)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-0-2" transform="translate(0,152)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-1-2" transform="translate(76,152)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-2-2" transform="translate(152,152)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-3-2" transform="translate(228,152)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-0-3" transform="translate(0,228)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-1-3" transform="translate(76,228)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-2-3" transform="translate(152,228)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-3-3" transform="translate(228,228)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-0-4" transform="translate(0,304)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-1-4" transform="translate(76,304)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-2-4" transform="translate(152,304)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-3-4" transform="translate(228,304)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g></g><g class="trails"><path class="trail" stroke="#CAC9CC" stroke-width="9.88" fill="none" d=" M 0 152 L 60.8 152 C 68.4 152 76 144.4 76 136.8 L 76 91.2 C 76 83.6 83.6 76 91.2 76 L 136.8 76 C 144.4 76 152 68.4 152 60.8 L 152 15.200000000000001 C 152 7.6000000000000005 159.6 0 167.2 0 L 212.8 0 C 220.4 0 228 0 228 0 L 228 0 " style="opacity: 1;"></path><path class="trail" stroke="#CAC9CC" stroke-width="9.88" fill="none" d=" M 152 304 L 152 243.2 C 152 235.6 152 220.4 152 212.8 L 152 167.2 C 152 159.6 152 144.4 152 136.8 L 152 91.2 C 152 83.6 159.6 76 167.2 76 L 212.8 76 C 220.4 76 235.6 76 243.2 76 L 288.8 76 C 296.4 76 304 76 304 76 L 304 76 " style="opacity: 1;"></path></g><g class="grid"><g class="cell s-0-0" transform="translate(0,0)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-1-0" transform="translate(76,0)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-2-0" transform="translate(152,0)"><g class="V" style="fill: rgb(0, 0, 139); stroke: rgb(0, 0, 139);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-0-1" transform="translate(0,76)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-1-1" transform="translate(76,76)"><g class="V" style="fill: rgb(117, 136, 216); stroke: rgb(117, 136, 216);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-2-1" transform="translate(152,76)"><g class="V" style="fill: rgb(126, 145, 217); stroke: rgb(126, 145, 217);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-3-1" transform="translate(228,76)"><g class="V" style="fill: rgb(189, 95, 55); stroke: rgb(189, 95, 55);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-0-2" transform="translate(0,152)"><g class="V" style="fill: rgb(117, 136, 216); stroke: rgb(117, 136, 216);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-1-2" transform="translate(76,152)"><g class="V" style="fill: rgb(117, 136, 216); stroke: rgb(117, 136, 216);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-2-2" transform="translate(152,152)"><g class="V" style="fill: rgb(126, 145, 217); stroke: rgb(126, 145, 217);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-3-2" transform="translate(228,152)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-0-3" transform="translate(0,228)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-1-3" transform="translate(76,228)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-2-3" transform="translate(152,228)"><g class="V" style="fill: rgb(126, 145, 217); stroke: rgb(126, 145, 217);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-3-3" transform="translate(228,228)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-0-4" transform="translate(0,304)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-1-4" transform="translate(76,304)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-2-4" transform="translate(152,304)"><g class="V" style="fill: rgb(126, 145, 217); stroke: rgb(126, 145, 217);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-3-4" transform="translate(228,304)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g></g><g class="goal_layer"><rect width="60.800000000000004" height="60.800000000000004" transform="translate(197.6,-30.400000000000002)" style="fill: rgb(0, 0, 139);"></rect><rect width="60.800000000000004" height="60.800000000000004" transform="translate(273.59999999999997,-30.400000000000002)" style="fill: rgb(189, 95, 55);"></rect><rect width="60.800000000000004" height="60.800000000000004" transform="translate(273.59999999999997,45.6)" style="fill: rgb(189, 95, 55);"></rect><rect width="60.800000000000004" height="60.800000000000004" transform="translate(273.59999999999997,121.60000000000001)" style="fill: rgb(189, 95, 55);"></rect><rect width="60.800000000000004" height="60.800000000000004" transform="translate(273.59999999999997,197.6)" style="fill: rgb(189, 95, 55);"></rect><rect width="60.800000000000004" height="60.800000000000004" transform="translate(273.59999999999997,273.59999999999997)" style="fill: rgb(189, 95, 55);"></rect><rect width="68.39999999999999" height="372.40000000000003" transform="translate(269.8,-34.199999999999996)" style="fill: rgb(189, 95, 55);"></rect></g><g class="agent_layer"></g><g class="foreground"><text transform="translate(205.20000000000002,7.6000000000000005)" style="fill: rgb(202, 201, 204); font: bold 30px sans-serif;">+2</text><text transform="translate(281.2,83.60000000000001)" style="fill: rgb(202, 201, 204); font: bold 30px sans-serif;">–1</text></g></g></svg>
        <figcaption>
            <h4>Temporal Difference</h4>
            <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mtext>&nbsp;</mtext><mo>↩</mo><mtext>&nbsp;</mtext><msub><mi>r</mi><mi>t</mi></msub><mtext>&nbsp;</mtext><mo>+</mo><mtext>&nbsp;</mtext><mi>γ</mi><mi>V</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">V(s_t) ~\hookleftarrow~ r_{t} ~+~ \gamma V(s_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mrel"><span class="mspace">&nbsp;</span><span class="mrel">↩</span></span><span class="mord"><span class="mspace">&nbsp;</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mbin"><span class="mspace">&nbsp;</span><span class="mbin">+</span></span><span class="mord mathit"><span class="mspace">&nbsp;</span><span class="mord mathit" style="margin-right:0.05556em;">γ</span></span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>
        </figcaption>
    </div>
    <div id="Q">
        <svg width="380" height="380" viewBox="0 0 380 380"><g class="env" transform="translate(38,38)"><g class="background"><g class="cell s-0-0" transform="translate(0,0)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-1-0" transform="translate(76,0)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-2-0" transform="translate(152,0)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-0-1" transform="translate(0,76)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-1-1" transform="translate(76,76)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-2-1" transform="translate(152,76)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-3-1" transform="translate(228,76)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-0-2" transform="translate(0,152)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-1-2" transform="translate(76,152)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-2-2" transform="translate(152,152)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-3-2" transform="translate(228,152)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-0-3" transform="translate(0,228)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-1-3" transform="translate(76,228)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-2-3" transform="translate(152,228)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-3-3" transform="translate(228,228)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-0-4" transform="translate(0,304)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-1-4" transform="translate(76,304)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-2-4" transform="translate(152,304)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g><g class="cell s-3-4" transform="translate(228,304)"><rect width="72.2" height="72.2" transform="translate(-36.1,-36.1)"></rect></g></g><g class="trails"><path class="trail" stroke="#CAC9CC" stroke-width="9.88" fill="none" d=" M 0 152 L 60.8 152 C 68.4 152 76 144.4 76 136.8 L 76 91.2 C 76 83.6 83.6 76 91.2 76 L 136.8 76 C 144.4 76 152 68.4 152 60.8 L 152 15.200000000000001 C 152 7.6000000000000005 159.6 0 167.2 0 L 212.8 0 C 220.4 0 228 0 228 0 L 228 0 " style="opacity: 1;"></path><path class="trail" stroke="#CAC9CC" stroke-width="9.88" fill="none" d=" M 152 304 L 152 243.2 C 152 235.6 152 220.4 152 212.8 L 152 167.2 C 152 159.6 152 144.4 152 136.8 L 152 91.2 C 152 83.6 159.6 76 167.2 76 L 212.8 76 C 220.4 76 235.6 76 243.2 76 L 288.8 76 C 296.4 76 304 76 304 76 L 304 76 " style="opacity: 1;"></path></g><g class="grid"><g class="cell s-0-0" transform="translate(0,0)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-1-0" transform="translate(76,0)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-2-0" transform="translate(152,0)"><g class="V" style="fill: rgb(0, 0, 139); stroke: rgb(0, 0, 139);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-0-1" transform="translate(0,76)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-1-1" transform="translate(76,76)"><g class="V" style="fill: rgb(0, 0, 139); stroke: rgb(0, 0, 139);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-2-1" transform="translate(152,76)"><g class="V" style="fill: rgb(0, 0, 139); stroke: rgb(0, 0, 139);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-3-1" transform="translate(228,76)"><g class="V" style="fill: rgb(189, 95, 55); stroke: rgb(189, 95, 55);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-0-2" transform="translate(0,152)"><g class="V" style="fill: rgb(0, 0, 139); stroke: rgb(0, 0, 139);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-1-2" transform="translate(76,152)"><g class="V" style="fill: rgb(0, 0, 139); stroke: rgb(0, 0, 139);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-2-2" transform="translate(152,152)"><g class="V" style="fill: rgb(0, 0, 139); stroke: rgb(0, 0, 139);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-3-2" transform="translate(228,152)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-0-3" transform="translate(0,228)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-1-3" transform="translate(76,228)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-2-3" transform="translate(152,228)"><g class="V" style="fill: rgb(0, 0, 139); stroke: rgb(0, 0, 139);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="visible"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-3-3" transform="translate(228,228)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action down" d="M-15.200000000000001,0L0,38L15.200000000000001,0" transform="translate(0,19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-0-4" transform="translate(0,304)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-1-4" transform="translate(76,304)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-2-4" transform="translate(152,304)"><g class="V" style="fill: rgb(0, 0, 139); stroke: rgb(0, 0, 139);"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g><g class="cell s-3-4" transform="translate(228,304)"><g class="V" style="display: none;"><circle r="22.8"></circle><line x2="53" y2="0" class="left" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="-53" y2="0" class="right" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="53" class="up" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line><line x2="0" y2="-53" class="down" id="connector" style="stroke-width: 9.88px;" visibility="hidden"></line></g><g class="Q"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g><g class="P"><path class="action up" d="M-15.200000000000001,0L0,-38L15.200000000000001,0" transform="translate(0,-19)" style="display: none;"></path><path class="action left" d="M0,-15.200000000000001L-38,0L0,15.200000000000001" transform="translate(-19,0)" style="display: none;"></path><path class="action right" d="M0,-15.200000000000001L38,0L0,15.200000000000001" transform="translate(19,0)" style="display: none;"></path></g></g></g><g class="goal_layer"><rect width="60.800000000000004" height="60.800000000000004" transform="translate(197.6,-30.400000000000002)" style="fill: rgb(0, 0, 139);"></rect><rect width="60.800000000000004" height="60.800000000000004" transform="translate(273.59999999999997,-30.400000000000002)" style="fill: rgb(189, 95, 55);"></rect><rect width="60.800000000000004" height="60.800000000000004" transform="translate(273.59999999999997,45.6)" style="fill: rgb(189, 95, 55);"></rect><rect width="60.800000000000004" height="60.800000000000004" transform="translate(273.59999999999997,121.60000000000001)" style="fill: rgb(189, 95, 55);"></rect><rect width="60.800000000000004" height="60.800000000000004" transform="translate(273.59999999999997,197.6)" style="fill: rgb(189, 95, 55);"></rect><rect width="60.800000000000004" height="60.800000000000004" transform="translate(273.59999999999997,273.59999999999997)" style="fill: rgb(189, 95, 55);"></rect><rect width="68.39999999999999" height="372.40000000000003" transform="translate(269.8,-34.199999999999996)" style="fill: rgb(189, 95, 55);"></rect></g><g class="agent_layer"></g><g class="foreground"><text transform="translate(205.20000000000002,7.6000000000000005)" style="fill: rgb(202, 201, 204); font: bold 30px sans-serif;">+2</text><text transform="translate(281.2,83.60000000000001)" style="fill: rgb(202, 201, 204); font: bold 30px sans-serif;">–1</text></g></g></svg>
        <figcaption>
            <h4>Q-Learning</h4>
            <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mtext>&nbsp;</mtext><mo>↩</mo><mtext>&nbsp;</mtext><msub><mi>r</mi><mi>t</mi></msub><mtext>&nbsp;</mtext><mo>+</mo><mtext>&nbsp;</mtext><mi>γ</mi><mi>V</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">Q(s_t, a_t) ~\hookleftarrow~ r_{t} ~+~ \gamma V(s_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">Q</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mrel"><span class="mspace">&nbsp;</span><span class="mrel">↩</span></span><span class="mord"><span class="mspace">&nbsp;</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mbin"><span class="mspace">&nbsp;</span><span class="mbin">+</span></span><span class="mord mathit"><span class="mspace">&nbsp;</span><span class="mord mathit" style="margin-right:0.05556em;">γ</span></span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>
            <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo><mtext>&nbsp;</mtext><mo>=</mo><mtext>&nbsp;</mtext><msub><mo><mtext>max</mtext></mo><mi>a</mi></msub><mtext>&nbsp;</mtext><mi>Q</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">V(s_{t+1}) ~=~ \mathop{\textrm{max}} \limits_{a} ~ Q(s_{t+1},a_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.45em;vertical-align:-0.7em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span><span class="mrel"><span class="mspace">&nbsp;</span><span class="mrel">=</span></span><span class="mop op-limits"><span class="mspace">&nbsp;</span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.43056em;"><span style="top:-2.4em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">a</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop"><span class="mord text"><span class="mord mathrm">max</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7em;"></span></span></span></span><span class="mord mathit"><span class="mspace">&nbsp;</span><span class="mord mathit">Q</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>
        </figcaption>
    </div>

    <script>
      (function() {
        let compare_play_button = document.querySelector("#compare_play_button");

        let run = compare_vis(
          document.getElementById("compare-figure"),
          {algs: ["MC", "TD", "Q"], trail: true},
          () => {
            compare_play_button.textContent = "Play";
            compare_play_button.disabled = false;

          }
        );

        compare_play_button.addEventListener("click", () => {

          compare_play_button.textContent = "Playing..."
          compare_play_button.disabled = true;
          d3.selectAll("#connector").attr("visibility", "hidden"); // a hack to fix a hack
          run();
        });

        compare_play_button.click();

      })();


    </script>

  </figure>

</d-title>

<d-byline>
  <div class="byline grid">
    <div class="authors-affiliations grid">
      <h3>Authors</h3>
      <h3>Affiliations</h3>
      
        <p class="author">
          
            <a class="name" href="https://greydanus.github.io/about.html">Sam Greydanus</a>
        </p>
        <p class="affiliation">
        <a class="affiliation" href="https://g.co/brain">Google Brain</a>
        </p>
      
        <p class="author">
          
            <a class="name" href="https://colah.github.io/">Chris Olah</a>
        </p>
        <p class="affiliation">
        <a class="affiliation" href="https://g.co/brain">OpenAI</a>
        </p>
      
    </div>
    <div>
      <h3>Published</h3>
      
        <p>Sept. 30, 2019</p> 
    </div>
    <div>
      <h3>DOI</h3>
      
        <p><a href="https://doi.org/10.23915/distill.00020">10.23915/distill.00020</a></p>
    </div>
  </div>
</d-byline><d-article>
<!-- <d-cite key="Tsividis2017HumanAtari"></d-cite> -->

  <h2>Introduction</h2>
  <p>
    In the last few years, reinforcement learning (RL) has made remarkable progress, including <a href="https://deepmind.com/research/alphago/">beating world-champion Go players</a>, <a href="https://blog.openai.com/learning-dexterity/">controlling robotic hands</a>, and even <a href="https://deepmind.com/blog/learning-to-generate-images/">painting pictures</a>.
  </p>

  <p>
    One of the key sub-problems of RL is value estimation – learning the
 long-term consequences of being in a state.

    This can be tricky because future returns are generally noisy, 
affected by many things other than the present state. The further we 
look into the future, the more this becomes true.

    But while difficult, estimating value is also essential to many 
approaches to RL.<d-footnote id="d-footnote-1">For many approaches 
(policy-value iteration), estimating value essentially is the whole 
problem, while in other approaches (actor-critic models), value 
estimation is essential for reducing noise.</d-footnote>
  </p>

  <p>
    The natural way to estimate the value of a state is as the average 
return you observe from that state. We call this Monte Carlo value 
estimation.
  </p>

<figure id="cliffworld-mc" class="base-grid">
    <figcaption style="grid-column: kicker">
            <b>Cliff World</b>
            <d-cite key="Sutton2017ReinforcementIntroduction"></d-cite> is a classic RL example, where the agent learns to
            walk along a <span style="background: #FFD5D5">cliff</span> to reach a <span style="background: #D5D5FF">goal</span>.
    </figcaption>
    <div class="l-text">
        <div class="subfigure">
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/cliffworld-path1.svg">
            <div class="figcaption">
                Sometimes the agent reaches its goal.
            </div>
        </div>

        <div class="subfigure">
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/cliffworld-path2.svg">
            <div class="figcaption">
                Other times it falls off the cliff.
            </div>
        </div>

        <div class="subfigure">
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/cliffworld-mc.svg">
            <div class="figcaption">
                Monte Carlo averages over trajectories where they intersect.
            </div>
        </div>
    </div>
</figure>

  <p>
    If a state is visited by only one episode, Monte Carlo says its 
value is the return of that episode. If multiple episodes visit a state,
 Monte Carlo estimates its value as the average over them.
  </p>

  <p>
    Let’s write Monte Carlo a bit more formally.
    In RL, we often describe algorithms with update rules, which tell us how estimates change with one more episode.
    We’ll use an “updates toward” (<span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>↩</mo></mrow><annotation encoding="application/x-tex">\hookleftarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.511em;"></span><span class="strut bottom" style="height:0.522em;vertical-align:-0.011em;"></span><span class="base"><span class="mrel">↩</span></span></span></span></span>) operator to keep equations simple.<d-footnote id="d-footnote-2">

    In tabular settings such as the Cliff World example, this “update 
towards” operator computes a running average. More specifically, the <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>n</mi><mrow><mi>t</mi><mi>h</mi></mrow></msup></mrow><annotation encoding="application/x-tex">n^{th}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.849108em;"></span><span class="strut bottom" style="height:0.849108em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mord mathit mtight">h</span></span></span></span></span></span></span></span></span></span></span></span></span> Monte Carlo update is <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mo>=</mo><mi>V</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>)</mo><mo>+</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>n</mi></mrow></mfrac><mo fence="true">[</mo><msub><mi>R</mi><mi>n</mi></msub><mo>−</mo><mi>V</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex"> V(s_t) = V(s_{t-1}) + \frac{1}{n} \bigr[ R_{n} - V(s_t) \bigl] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.85em;"></span><span class="strut bottom" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mbin">−</span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mopen"><span class="delimsizing size1">]</span></span></span></span></span></span>
 and we could just as easily use the “+=” notation. But when using 
parameteric function approximators such as neural networks, our “update 
towards” operator may represent a gradient step, which cannot be written
 in “+=” notation. In order to keep our notation clean and general, we 
chose to use the <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>↩</mo></mrow><annotation encoding="application/x-tex">\hookleftarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.511em;"></span><span class="strut bottom" style="height:0.522em;vertical-align:-0.011em;"></span><span class="base"><span class="mrel">↩</span></span></span></span></span> operator throughout.</d-footnote>
  </p>

  <div class="eq-grid" style="grid-gap: 8px;">
      <div style="grid-row: 1; grid-column: 1;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">V(s_t)~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 3;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>↩</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">\hookleftarrow~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.511em;"></span><span class="strut bottom" style="height:0.522em;vertical-align:-0.011em;"></span><span class="base"><span class="mrel">↩</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 5;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>R</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">R_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span></span></div>

      <figcaption style="grid-row: 2; grid-column: 1; max-width:140px;"> State value </figcaption>
      <figcaption style="grid-row: 2; grid-column: 5; max-width:200px;"> Return </figcaption>
  </div>

  <p>
    The term on the right is called the return and we use it to measure 
the amount of long-term reward an agent earns. The return is just a 
weighted sum of future rewards <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi>t</mi></msub><mo>+</mo><mi>γ</mi><msub><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>+</mo><msup><mi>γ</mi><mn>2</mn></msup><msub><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>2</mn></mrow></msub><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">r_{t} + \gamma r_{t+1} + \gamma^2 r_{t+2} + …</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.0224389999999999em;vertical-align:-0.208331em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05556em;">γ</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mbin">+</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span></span></span></span></span> where <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>γ</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.05556em;">γ</span></span></span></span></span>
 is a discount factor which controls how much short term rewards are 
worth relative to long-term rewards. Estimating value by updating 
towards return makes a lot of sense. After all, the <i>definition</i> of value is expected return. It might be surprising that we can do better.
  </p>

  <h2>Beating Monte Carlo</h2>

    <p>
      But we can do better! The trick is to use a method called <i>Temporal Difference (TD) learning</i>, which bootstraps off of nearby states to make value updates.
    </p>


    <div class="eq-grid" style="grid-gap: 8px; margin-top: 0; margin-bottom: 0;">

      <div style="grid-row: 1; grid-column: 1;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">V(s_t)~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 3;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>↩</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">\hookleftarrow~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.511em;"></span><span class="strut bottom" style="height:0.522em;vertical-align:-0.011em;"></span><span class="base"><span class="mrel">↩</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 5;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">r_{t} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 7;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex">+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">+</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 9;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>γ</mi><mi>V</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\gamma V(s_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.05556em;">γ</span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div>

      <figcaption style="grid-row: 2; grid-column: 1; max-width:140px;"> State value </figcaption>
      <figcaption style="grid-row: 2; grid-column: 5; max-width:140px;">Reward</figcaption>
      <figcaption style="grid-row: 2; grid-column: 9; max-width:140px;">Next state value</figcaption>

    </div>

    <p>
      Intersections between two trajectories are handled differently 
under this update. Unlike Monte Carlo, TD updates merge intersections so
 that the return flows backwards to all preceding states.
    </p><p>

<!--   <figure id="cliffworld-td" class="l-body">
        <div class="subfigure">
            <img src="figures/cliffworld-path1.svg"/>
            <div class="figcaption">
                Sometimes the agent reaches its goal.
            </div>
        </div>

        <div class="subfigure">
            <img src="figures/cliffworld-path2.svg"/>
            <div class="figcaption">
                Other times it falls off the cliff.
            </div>
        </div>

        <div class="subfigure">
            <img src="figures/cliffworld-td.svg"/>
            <div class="figcaption">
                TD learning merges paths where they intersect.
            </div>
        </div>
  </figure> -->

  </p><figure id="cliffworld-mc" class="base-grid">
    <div class="l-text">
        <div class="subfigure">
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/cliffworld-path1.svg">
            <div class="figcaption">
                Sometimes the agent reaches its goal.
            </div>
        </div>

        <div class="subfigure">
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/cliffworld-path2.svg">
            <div class="figcaption">
                Other times it falls off the cliff.
            </div>
        </div>

        <div class="subfigure">
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/cliffworld-td.svg">
            <div class="figcaption">
                TD learning merges paths where they intersect.
            </div>
        </div>
    </div>
</figure>

    <p>
      What does it mean to “merge trajectories” in a more formal sense? 
Why might it be a good idea? One thing to notice is that <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">V(s_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> can be written as the expectation over all of its TD updates:
    </p>

    <div class="eq-grid" style="grid-gap: 8px;">

      <div style="grid-row: 1; grid-column: 1;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">V(s_{t+1})~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 3;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>≃</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">\simeq~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.46375em;"></span><span class="strut bottom" style="height:0.46375em;vertical-align:0em;"></span><span class="base"><span class="mrel">≃</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 5;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo><mrow><mi mathvariant="double-struck">E</mi></mrow></mo><mo fence="true">[</mo><msubsup><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mo mathvariant="normal">′</mo></msubsup><mtext>&nbsp;</mtext><mo>+</mo><mtext>&nbsp;</mtext><mi>γ</mi><mi>V</mi><mo>(</mo><msubsup><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>2</mn></mrow><mo mathvariant="normal">′</mo></msubsup><mo>)</mo><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\mathop{\mathbb{E}} \bigr[ r’_{t+1} ~+~ \gamma V(s’_{t+2}) \bigl] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.85em;"></span><span class="strut bottom" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="base"><span class="mop"><span class="mord"><span class="mord mathbb">E</span></span></span><span class="mclose"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.451892em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.30643899999999996em;"></span></span></span></span></span><span class="mbin"><span class="mspace">&nbsp;</span><span class="mbin">+</span></span><span class="mord mathit"><span class="mspace">&nbsp;</span><span class="mord mathit" style="margin-right:0.05556em;">γ</span></span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.451892em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">2</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.30643899999999996em;"></span></span></span></span></span><span class="mclose">)</span><span class="mopen"><span class="delimsizing size1">]</span></span></span></span></span></span></div>

      <div style="grid-row: 3; grid-column: 3;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>≃</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">\simeq~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.46375em;"></span><span class="strut bottom" style="height:0.46375em;vertical-align:0em;"></span><span class="base"><span class="mrel">≃</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 3; grid-column: 5;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo><mrow><mi mathvariant="double-struck">E</mi></mrow></mo><mo fence="true">[</mo><msubsup><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mo mathvariant="normal">′</mo></msubsup><mo fence="true">]</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext><mo>+</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext><mi>γ</mi><mo><mrow><mi mathvariant="double-struck">E</mi></mrow></mo><mo fence="true">[</mo><mi>V</mi><mo>(</mo><msubsup><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>2</mn></mrow><mo mathvariant="normal">′</mo></msubsup><mo>)</mo><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\mathop{\mathbb{E}} \bigr[ r’_{t+1} \bigl] ~~+~~ \gamma \mathop{\mathbb{E}} \bigr[ V(s’_{t+2}) \bigl] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.85em;"></span><span class="strut bottom" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="base"><span class="mop"><span class="mord"><span class="mord mathbb">E</span></span></span><span class="mclose"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.451892em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.30643899999999996em;"></span></span></span></span></span><span class="mopen"><span class="delimsizing size1">]</span></span><span class="mord"><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span><span class="mbin">+</span></span><span class="mord mathit"><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span><span class="mord mathit" style="margin-right:0.05556em;">γ</span></span><span class="mop"><span class="mord"><span class="mord mathbb">E</span></span></span><span class="mclose"><span class="delimsizing size1">[</span></span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.451892em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">2</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.30643899999999996em;"></span></span></span></span></span><span class="mclose">)</span><span class="mopen"><span class="delimsizing size1">]</span></span></span></span></span></span></div>

    </div>

    <p>
      Now we can use this equation to expand the TD update rule recursively:
    </p>

  <div class="eq-grid" style="grid-gap: 8px;">

    <div style="grid-row: 1; grid-column: 1;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">V(s_t)~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
    <div style="grid-row: 1; grid-column: 3;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>↩</mo><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">\hookleftarrow~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.511em;"></span><span class="strut bottom" style="height:0.522em;vertical-align:-0.011em;"></span><span class="base"><span class="mrel">↩</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
    <div style="grid-row: 1; grid-column: 5;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">r_{t} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span></span></div>
    <div style="grid-row: 1; grid-column: 7;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex">+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">+</span></span></span></span></span></div>
    <div style="grid-row: 1; grid-column: 9;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>γ</mi><mi>V</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\gamma V(s_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.05556em;">γ</span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div>

    <div class="expansion-marker" style="grid-row: 2; grid-column: 9 / 14; "></div>

    <div style="grid-row: 3; grid-column: 1;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow></mrow><annotation encoding="application/x-tex"></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0em;"></span><span class="strut bottom" style="height:0em;vertical-align:0em;"></span><span class="base"></span></span></span></span></div>
    <div style="grid-row: 3; grid-column: 3;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>↩</mo><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">\hookleftarrow~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.511em;"></span><span class="strut bottom" style="height:0.522em;vertical-align:-0.011em;"></span><span class="base"><span class="mrel">↩</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
    <div style="grid-row: 3; grid-column: 5;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">r_{t} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span></span></div>
    <div style="grid-row: 3; grid-column: 7;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex">+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">+</span></span></span></span></span></div>
    <div style="grid-row: 3; grid-column: 9;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>γ</mi><mo><mrow><mi mathvariant="double-struck">E</mi></mrow></mo><mo fence="true">[</mo><msubsup><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mo mathvariant="normal">′</mo></msubsup><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\gamma \mathop{\mathbb{E}} \bigr[ r’_{t+1} \bigl]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.85em;"></span><span class="strut bottom" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.05556em;">γ</span><span class="mop"><span class="mord"><span class="mord mathbb">E</span></span></span><span class="mclose"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.451892em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.30643899999999996em;"></span></span></span></span></span><span class="mopen"><span class="delimsizing size1">]</span></span></span></span></span></span></div>
    <div style="grid-row: 3; grid-column: 11;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex">+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">+</span></span></span></span></span></div>
    <div style="grid-row: 3; grid-column: 13;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>γ</mi><mn>2</mn></msup><mo><mrow><mi mathvariant="double-struck">E</mi></mrow></mo><mo fence="true">[</mo><mi>V</mi><mo>(</mo><msubsup><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>2</mn></mrow><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msubsup><mo>)</mo><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\gamma^2 \mathop{\mathbb{E}} \bigr[ V(s’’_{t+2}) \bigl]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.85em;"></span><span class="strut bottom" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span><span class="mop"><span class="mord"><span class="mord mathbb">E</span></span></span><span class="mclose"><span class="delimsizing size1">[</span></span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.451892em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">2</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">′</span><span class="mord mathrm mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.30643899999999996em;"></span></span></span></span></span><span class="mclose">)</span><span class="mopen"><span class="delimsizing size1">]</span></span></span></span></span></span></div>

    <div class="expansion-marker" style="grid-row: 4; grid-column: 13 / 18; "></div>

    <div style="grid-row: 5; grid-column: 1;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow></mrow><annotation encoding="application/x-tex"></annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0em;"></span><span class="strut bottom" style="height:0em;vertical-align:0em;"></span><span class="base"></span></span></span></span></div>
    <div style="grid-row: 5; grid-column: 3;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>↩</mo><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">\hookleftarrow~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.511em;"></span><span class="strut bottom" style="height:0.522em;vertical-align:-0.011em;"></span><span class="base"><span class="mrel">↩</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
    <div style="grid-row: 5; grid-column: 5;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">r_{t} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span></span></div>
    <div style="grid-row: 5; grid-column: 7;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex">+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">+</span></span></span></span></span></div>
    <div style="grid-row: 5; grid-column: 9;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>γ</mi><mo><mrow><mi mathvariant="double-struck">E</mi></mrow></mo><mtext>&nbsp;</mtext><mo fence="true">[</mo><msubsup><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mo mathvariant="normal">′</mo></msubsup><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\gamma \mathop{\mathbb{E}} ~ \bigr[ r’_{t+1} \bigl]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.85em;"></span><span class="strut bottom" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.05556em;">γ</span><span class="mop"><span class="mord"><span class="mord mathbb">E</span></span></span><span class="mclose"><span class="mspace">&nbsp;</span><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.451892em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.30643899999999996em;"></span></span></span></span></span><span class="mopen"><span class="delimsizing size1">]</span></span></span></span></span></span></div>
    <div style="grid-row: 5; grid-column: 11;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex">+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">+</span></span></span></span></span></div>
    <div style="grid-row: 5; grid-column: 13;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>γ</mi><mn>2</mn></msup><mo><mrow><mi mathvariant="double-struck">E</mi><mi mathvariant="double-struck">E</mi></mrow></mo><mtext>&nbsp;</mtext><mo fence="true">[</mo><msubsup><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>2</mn></mrow><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msubsup><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\gamma^2 \mathop{\mathbb{EE}}  ~ \bigr[ r’’_{t+2} \bigl]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.85em;"></span><span class="strut bottom" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span><span class="mop"><span class="mord"><span class="mord mathbb">E</span><span class="mord mathbb">E</span></span></span><span class="mclose"><span class="mspace">&nbsp;</span><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.451892em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">2</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">′</span><span class="mord mathrm mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.30643899999999996em;"></span></span></span></span></span><span class="mopen"><span class="delimsizing size1">]</span></span></span></span></span></span></div>
    <div style="grid-row: 5; grid-column: 15;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">+~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">+</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
    <div style="grid-row: 5; grid-column: 17;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">…~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.10556em;"></span><span class="strut bottom" style="height:0.10556em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>

</div>

    <p>
      This gives us a strange-looking sum of nested expectation values. 
At first glance, it’s not clear how to compare them with the more 
simple-looking Monte Carlo update. More importantly, it’s not clear that
 we <i>should</i> compare the two; the updates are so different that it 
feels a bit like comparing apples to oranges. Indeed, it’s easy to think
 of Monte Carlo and TD learning as two entirely different approaches.
    </p>

    <p>
      But they are not so different after all. Let’s rewrite the Monte 
Carlo update in terms of reward and place it beside the expanded TD 
update.
    </p>

  <div class="eq-grid" style="grid-gap: 8px;">

    <figcaption style="grid-row: 1; grid-column: 1/3; max-width:140px;"><b>MC update</b></figcaption>
    <div style="grid-row: 2; grid-column: 1;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">V(s_t)~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
    <div style="grid-row: 2; grid-column: 3;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>&nbsp;</mtext><mo>↩</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">~\hookleftarrow~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.511em;"></span><span class="strut bottom" style="height:0.522em;vertical-align:-0.011em;"></span><span class="base"><span class="mrel"><span class="mspace">&nbsp;</span><span class="mrel">↩</span></span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
    <div style="grid-row: 2; grid-column: 5;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">r_{t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span></span></div>
    <div style="grid-row: 2; grid-column: 7;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">+~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">+</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
    <div style="grid-row: 2; grid-column: 9;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>γ</mi><mtext>&nbsp;</mtext><msub><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">\gamma ~ r_{t+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.05556em;">γ</span><span class="mord"><span class="mspace">&nbsp;</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span></span></span></span></span></div>
    <div style="grid-row: 2; grid-column: 11;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">+~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">+</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
    <div style="grid-row: 2; grid-column: 13;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>γ</mi><mn>2</mn></msup><mtext>&nbsp;</mtext><msub><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>2</mn></mrow></msub></mrow><annotation encoding="application/x-tex">\gamma^2 ~ r_{t+2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.0224389999999999em;vertical-align:-0.208331em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mspace">&nbsp;</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span></span></span></span></span></div>
    <div style="grid-row: 2; grid-column: 15;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">+~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">+</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
    <div style="grid-row: 2; grid-column: 17;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">…</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.10556em;"></span><span class="strut bottom" style="height:0.10556em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span></span></span></span></span></div>


    <figcaption style="grid-row: 3; grid-column: 5/7; max-width:90px; margin: 0px; padding: 0px;">Reward from present path.</figcaption>

    <figcaption style="grid-row: 3; grid-column: 9/11; max-width:125px; margin: 0px; padding: 0px;">Reward from present path.</figcaption>

    <figcaption style="grid-row: 3; grid-column: 13/14; max-width:125px; margin: 0px; padding: 0px;">Reward from present path…</figcaption>

    <figcaption style="grid-row: 4; grid-column: 1/3; max-width:140px; margin-top: 22px;"><b>TD update</b></figcaption>
    <div style="grid-row: 5; grid-column: 1;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">V(s_t)~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
    <div style="grid-row: 5; grid-column: 3;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>&nbsp;</mtext><mo>↩</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">~\hookleftarrow~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.511em;"></span><span class="strut bottom" style="height:0.522em;vertical-align:-0.011em;"></span><span class="base"><span class="mrel"><span class="mspace">&nbsp;</span><span class="mrel">↩</span></span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
    <div style="grid-row: 5; grid-column: 5;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">r_{t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span></span></div>
    <div style="grid-row: 5; grid-column: 7;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">+~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">+</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
    <div style="grid-row: 5; grid-column: 9;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>γ</mi><mo><mrow><mi mathvariant="double-struck">E</mi></mrow></mo><mtext>&nbsp;</mtext><mo fence="true">[</mo><msubsup><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mo mathvariant="normal">′</mo></msubsup><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\gamma \mathop{\mathbb{E}} ~ \bigr[ r’_{t+1} \bigl]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.85em;"></span><span class="strut bottom" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.05556em;">γ</span><span class="mop"><span class="mord"><span class="mord mathbb">E</span></span></span><span class="mclose"><span class="mspace">&nbsp;</span><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.451892em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.30643899999999996em;"></span></span></span></span></span><span class="mopen"><span class="delimsizing size1">]</span></span></span></span></span></span></div>
    <div style="grid-row: 5; grid-column: 11;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">+~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">+</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
    <div style="grid-row: 5; grid-column: 13;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>γ</mi><mn>2</mn></msup><mo><mrow><mi mathvariant="double-struck">E</mi><mi mathvariant="double-struck">E</mi></mrow></mo><mtext>&nbsp;</mtext><mo fence="true">[</mo><msubsup><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>2</mn></mrow><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msubsup><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\gamma^2 \mathop{\mathbb{EE}} ~ \bigr[ r’’_{t+2} \bigl]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.85em;"></span><span class="strut bottom" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span><span class="mop"><span class="mord"><span class="mord mathbb">E</span><span class="mord mathbb">E</span></span></span><span class="mclose"><span class="mspace">&nbsp;</span><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.451892em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">2</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">′</span><span class="mord mathrm mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.30643899999999996em;"></span></span></span></span></span><span class="mopen"><span class="delimsizing size1">]</span></span></span></span></span></span></div>
    <div style="grid-row: 5; grid-column: 15;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">+~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">+</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
    <div style="grid-row: 5; grid-column: 17;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">…</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.10556em;"></span><span class="strut bottom" style="height:0.10556em;vertical-align:0em;"></span><span class="base"><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span></span></span></span></span></div>

    <figcaption style="grid-row: 6; grid-column: 5/7; max-width:90px; margin: 0px; padding: 0px;">Reward from present path.</figcaption>

    <figcaption style="grid-row: 6; grid-column: 9/11; max-width:125px; margin: 0px; padding: 0px;">Expectation over paths intersecting present path.</figcaption>

    <figcaption style="grid-row: 6; grid-column: 13/14; max-width:125px; margin: 0px; padding: 0px;">Expectation over paths intersecting <i>paths intersecting</i> present path…</figcaption>
  </div>


    <p>
      A pleasant correspondence has emerged. The difference between 
Monte Carlo and TD learning comes down to the nested expectation 
operators. It turns out that there is a nice visual interpretation for 
what they are doing. We call it the <i>paths perspective</i> on value learning.
    </p>

    <h2>The Paths Perspective</h2>

    <p>
      We often think about an agent’s experience as a series of trajectories. The grouping is logical and easy to visualize.
    </p>

  <figure id="cliffworld-trajectories" class="l-body">
    <div class="subfigure">
        <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/cliffworld-path-1of4.svg">
        <div class="figcaption">
            Trajectory 1
        </div>
    </div>
    <div>
      <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/cliffworld-path-2of4.svg">
      <div class="figcaption">
        Trajectory 2
      </div>
    </div>
  </figure>


    <p>
      But this way of organizing experience de-emphasizes relationships <i>between</i>
 trajectories. Wherever two trajectories intersect, both outcomes are 
valid futures for the agent. So even if the agent has followed 
Trajectory 1 to the intersection, it could <i>in theory</i> follow 
Trajectory 2 from that point onward. We can dramatically expand the 
agent’s experience using these simulated trajectories or “paths.”
    </p>
    <style>
  #cliffworld-paths {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
    grid-gap: 20px;
  }
  </style>
  <figure id="cliffworld-paths" class="l-text">

    <div class="subfigure">
        <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/cliffworld-path-1of4.svg">
        <div class="figcaption">
        Path 1
        </div>
    </div>

    <div class="subfigure">
      <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/cliffworld-path-2of4.svg">
      <div class="figcaption">
        Path 2
      </div>
    </div>

    <div class="subfigure">
      <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/cliffworld-path-3of4.svg">
      <div class="figcaption">
        Path 3
      </div>
    </div>

    <div class="subfigure">
      <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/cliffworld-path-4of4.svg">
      <div class="figcaption">
        Path 4
      </div>
    </div>
  </figure>

    <p>
      <b>Estimating value.</b> It turns out that Monte Carlo is 
averaging over real trajectories whereas TD learning is averaging over 
all possible paths. The nested expectation values we saw earlier 
correspond to the agent averaging across <i>all possible future paths</i>.
    </p>

  <style>
  #compare-mctd {
    display: grid;
    grid-gap: 40px;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  }
  #compare-mctd .subfigure {
      display: grid;
      grid-gap: 20px;
      grid-template-columns: repeat(2, minmax(160px, 1fr));
      /* grid-auto-rows: min-content; */
      /* grid-template-rows: min-content auto; */
    }
  #compare-mctd .subfigure .column-heading {
      grid-column: 1 / -1;
  }

  #compare-mctd .figcaption {
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    padding-top: 5px;
    margin-top: 5px;
      /* min-height: 179px; */
      /* min-width: 179px; */
      /* flex: 1; */
  }


  </style>
  <figure id="compare-mctd" class="l-page">
      <div class="subfigure">
        <h4 style="grid-column: span 2;" class="column-heading">Monte Carlo Estimation</h4>
        <div style="grid-column: 1;" class="evidence">
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/traj-thumbnails.svg">
            <div class="figcaption">
                Averages over <strong>real trajectories</strong>
            </div>
        </div>
        <div style="grid-column: 2;" class="estimate">
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/cliffworld-mc.svg">
            <div class="figcaption">
                Resulting MC estimate
            </div>
        </div>
      </div>
      <div class="subfigure">
        <h4 style="grid-column: span 2;" class="column-heading">Temporal Difference Estimation</h4>
        <div class="evidence">
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/path-thumbnails.svg">
            <div class="figcaption">
                    Averages over <strong>possible paths</strong>
            </div>
        </div>
        <div class="estimate">
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/cliffworld-td.svg">
            <div class="figcaption">
                Resulting TD estimate
            </div>
        </div>
      </div>
  </figure>

    <p>
      <b>Comparing the two.</b> Generally speaking, the best value 
estimate is the one with the lowest variance. Since tabular TD and Monte
 Carlo are empirical averages, the method that gives the better estimate
 is the one that averages over more items. This raises a natural 
question: Which estimator averages over more items?
    </p>

    <div class="eq-grid" style="grid-gap: 8px;">

      <div style="grid-row: 1; grid-column: 1;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mi>a</mi><mi>r</mi><mo>[</mo><mi>V</mi><mo>(</mo><mi>s</mi><mo>)</mo><mo>]</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">Var[V(s)]~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mclose">]</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 3;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∝</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">\propto~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base"><span class="mrel">∝</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 5;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mn>1</mn></mrow><mrow><mi>N</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{N} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="base"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div>

      <figcaption style="grid-row: 2; grid-column: 1; max-width:140px;"> Variance of estimate </figcaption>
      <figcaption style="grid-row: 2; grid-column: 5; max-width:140px;">Inverse of the number of items in the average</figcaption>

    </div>

    <p>
      First off, TD learning never averages over fewer trajectories than
 Monte Carlo because there are never fewer simulated trajectories than 
real trajectories. On the other hand, when there are <i>more</i> 
simulated trajectories, TD learning has the chance to average over more 
of the agent’s experience.

      This line of reasoning suggests that TD learning is the better 
estimator and helps explain why TD tends to outperform Monte Carlo in 
tabular environments.
    </p>

<!--     <p>
      Here's a link to my latest <a href="https://www.overleaf.com/read/nppjvtjfmqjr">attempt at a proof</a>.
    </p> -->


    <h2>Introducing Q-functions</h2>

    <p>
      An alternative to the value function is the Q-function. Instead of
 estimating the value of a state, it estimates the value of a state and 
an action. The most obvious reason to use Q-functions is that they allow
 us to compare different actions.
    </p>

  <style>
  #qlearning-intro {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
    grid-column-gap: 30px;
  }
  </style>
  <figure id="qlearning-intro" style="max-width: 600px;">
    <div>
        <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/policy.svg">
        <div class="figcaption">
            Many times we’d like to compare the value of actions under a policy.
        </div>
    </div>

    <div>
        <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/value.svg">
        <div class="figcaption">
            It’s hard to do this with a value function.
        </div>
    </div>

    <div>
        <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/qvalue.svg">
        <div class="figcaption">
            It’s easier to use Q-functions, which estimate joint state-action values.
        </div>
    </div>
  </figure>

    <p>
      There are some other nice properties of Q-functions. In order to 
see them, let’s write out the Monte Carlo and TD update rules.

      <!-- First, though, we need to modify our Monte Carlo and TD updates. -->
    </p>

    <p>
      <b>Updating Q-functions.</b> The Monte Carlo update rule looks nearly identical to the one we wrote down for <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">V(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span></span>:
    </p>

    <div class="eq-grid" style="grid-gap: 8px; margin-top: 10; margin-bottom: 10;">
      <div style="grid-row: 1; grid-column: 1;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">Q(s_t, a_t)~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">Q</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 3;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>↩</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">\hookleftarrow~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.511em;"></span><span class="strut bottom" style="height:0.522em;vertical-align:-0.011em;"></span><span class="base"><span class="mrel">↩</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 5;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>R</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">R_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span></span></div>

      <figcaption style="grid-row: 2; grid-column: 1; max-width:140px;"> State-action value </figcaption>
      <figcaption style="grid-row: 2; grid-column: 5; max-width:200px;"> Return </figcaption>
    </div>

    <p>
      We still update towards the return. Instead of updating towards 
the return of being in some state, though, we update towards the return 
of being in some state <i>and</i> selecting some action.
    </p>

    <p>
      Now let’s try doing the same thing with the TD update:
    </p>

    <div class="eq-grid" style="grid-gap: 8px; margin-top: 10; margin-bottom: 10;">

      <div style="grid-row: 1; grid-column: 1;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">Q(s_t, a_t)~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">Q</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 3;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>↩</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">\hookleftarrow~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.511em;"></span><span class="strut bottom" style="height:0.522em;vertical-align:-0.011em;"></span><span class="base"><span class="mrel">↩</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 5;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">r_{t} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 7;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex">+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">+</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 9;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>γ</mi><mi>Q</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\gamma Q(s_{t+1}, a_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.05556em;">γ</span><span class="mord mathit">Q</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div>

      <figcaption style="grid-row: 2; grid-column: 1; max-width:140px;"> State-action value </figcaption>
      <figcaption style="grid-row: 2; grid-column: 5; max-width:140px;">Reward</figcaption>
      <figcaption style="grid-row: 2; grid-column: 9/12; max-width:300px;">Next state value</figcaption>
      <!-- <figcaption style="grid-row: 2; grid-column: 9/12; max-width:300px;">Next state value (should be $V(s_{t+1})$)</figcaption> -->

    </div>

    <p>
      This version of the TD update rule requires a tuple of the form <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>r</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">(s_t, a_t, r_{t}, s_{t+1}, a_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>, so we call it the <i>Sarsa</i> algorithm.
      Sarsa may be the simplest way to write this TD update, but it’s not the most efficient.
      The problem with Sarsa is that it uses <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">Q(s_{t+1},a_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">Q</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> for the next state value when it really should be using <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">V(s_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>.
<!--       The problem is that we're using $Q(s_{t+1},a_{t+1})$ to estimate the next state value. -->
<!--       The problem with Sarsa is that it updates towards $Q(s_{t+1},a_{t+1})$ when in fact it should update towards $V(s_{t+1})$. -->
      What we need is a better estimate of <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">V(s_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>.
    </p>

    <div class="eq-grid" style="grid-gap: 8px; margin-top: 10; margin-bottom: 10;">
      <div style="grid-row: 1; grid-column: 1;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">Q(s_t, a_t)~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">Q</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 3;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>↩</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">\hookleftarrow~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.511em;"></span><span class="strut bottom" style="height:0.522em;vertical-align:-0.011em;"></span><span class="base"><span class="mrel">↩</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 5;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">r_{t} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 7;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex">+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">+</span></span></span></span></span></div>
      <div style="grid-row: 1; grid-column: 9;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>γ</mi><mi>V</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\gamma V(s_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.05556em;">γ</span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div>

      <figcaption style="grid-row: 2; grid-column: 1; max-width:140px;"> State-action value </figcaption>
      <figcaption style="grid-row: 2; grid-column: 5; max-width:140px;">Reward</figcaption>
      <figcaption style="grid-row: 2; grid-column: 9; max-width:140px;">Next state value</figcaption>

      <div style="grid-row: 4; grid-column: 1;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">V(s_{t+1})~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 4; grid-column: 3;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>=</mo><mtext>&nbsp;</mtext><mtext>&nbsp;</mtext></mrow><annotation encoding="application/x-tex">=~~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.36687em;"></span><span class="strut bottom" style="height:0.36687em;vertical-align:0em;"></span><span class="base"><span class="mrel">=</span><span class="mspace">&nbsp;</span><span class="mspace">&nbsp;</span></span></span></span></span></div>
      <div style="grid-row: 4; grid-column: 5;"><span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>?</mo></mrow><annotation encoding="application/x-tex">? </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base"><span class="mclose">?</span></span></span></span></span></div>
    </div>

    <p>
      There are many ways to recover <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">V(s_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> from Q-functions. In the next section, we’ll take a close look at four of them.
    </p>


    <h2>Learning Q-functions with reweighted paths</h2>

    <p>
      <b>Expected Sarsa.</b>
      A better way of estimating the next state’s value is with a weighted sum<d-footnote id="d-footnote-3">Also written as an expectation value, hence “Expected Sarsa”.</d-footnote> over its Q-values. We call this approach Expected Sarsa:
    </p>

    <figure id="expected-sarsa" class="l-body two-column-math">
        <div class="wrapper">
            <div class="figcaption">
                <b>Sarsa</b> uses the Q-value associated with <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">a_{t+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="base"><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span></span></span></span></span> to estimate the next state’s value.
            </div>
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/sarsa.svg">
            <div class="figcaption">
                <b>Expected Sarsa</b> uses an expectation over Q-values to estimate the next state’s value.
            </div>
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/expected-sarsa.svg">
        </div>
    </figure>

    <p>
      Here’s a surprising fact about Expected Sarsa: the value estimate it gives is often <i>better</i>
 than a value estimate computed straight from the experience. This is 
because the expectation value weights the Q-values by the true policy 
distribution rather than the empirical policy distribution. In doing 
this, Expected Sarsa <i>corrects for the difference between the empirical policy distribution and the true policy distribution.</i>
    </p>

    <p>
      <b>Off-policy value learning.</b> We can push this idea even 
further. Instead of weighting Q-values by the true policy distribution, 
we can weight them by an arbitrary policy, <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>π</mi><mrow><mi>o</mi><mi>f</mi><mi>f</mi></mrow></msup></mrow><annotation encoding="application/x-tex">\pi^{off}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8491079999999999em;"></span><span class="strut bottom" style="height:0.8491079999999999em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">o</span><span class="mord mathit mtight" style="margin-right:0.10764em;">f</span><span class="mord mathit mtight" style="margin-right:0.10764em;">f</span></span></span></span></span></span></span></span></span></span></span></span></span>:
    </p>
    <figure id="off-policy" class="l-body two-column-math">
        <div class="wrapper">
            <div class="figcaption">
                <b>Off-policy value learning</b> weights Q-values by an arbitrary policy.
            </div>
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/off-policy.svg">
        </div>
    </figure>

    <p>
      This slight modification lets us estimate value under any policy 
we like. It’s interesting to think about Expected Sarsa as a special 
case of off-policy learning that’s used for on-policy estimation.
    </p>

    <p>
      <b>Re-weighting path intersections.</b> What does the paths 
perspective say about off-policy learning? To answer this question, 
let’s consider some state where multiple paths of experience intersect.
    </p>

    <style>
        #reweighting {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            grid-gap: 30px;
        }
        /* #reweighting .wrapper {
            min-width: 160px;
        } */
        #reweighting-full .cls-1 {
            fill: #2d307b;
        }

        #reweighting-full .cls-2 {
            fill: #e7ebe8;
        }

        #reweighting-full .cls-3 {
            fill: #cac9cc;
        }

        #reweighting-full .cls-4 {
            fill: #bd5f35;
        }

        #reweighting-full .cls-5, .cls-6, .cls-7 {
            fill: none;
            stroke-width: 10px;
        }

        #reweighting-full .cls-5 {
            stroke: #bd5f35;
        }

        #reweighting-full .cls-5, .cls-7 {
            stroke-miterlimit: 10;
        }

        #reweighting-full .cls-6 {
            stroke: #2d307b;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        #reweighting-full .cls-7 {
            stroke: #8191c9;
        }

        #reweighting-full .cls-8 {
            fill: #8191c9;
        }

        #reweighting-full .cls-9 {
            font-size: 24.25341px;
            fill: #d1d3d4;
            font-family: Arial-BoldMT, Arial;
            font-weight: 700;
        }
    </style>
  <figure id="reweighting" class="l-text">

    <div class="wrapper">
        <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/reweighting-1.svg">
        <div class="figcaption">
            Multiple paths of experience intersect at this state.
        </div>
    </div>

    <div class="wrapper">
        <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/reweighting-2.svg">
        <div class="figcaption">
            Paths that exit the state through different actions get associated with different Q-values.
        </div>
    </div>

    <div class="wrapper">
        <svg width="100%" id="reweighting-full" viewBox="0 0 294 294">
            <g id="background">
            <rect class="cls-1" x="182.00345" y="4.47957" width="47.96635" height="47.96635"></rect>
            <rect class="cls-2" x="0.05169" y="0.34616" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="59.4495" y="0.40632" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="118.61002" y="0.41807" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="0.05169" y="59.75541" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="59.4495" y="59.81557" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="118.61002" y="59.82731" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="177.9302" y="59.85081" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="0.05169" y="118.9093" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="59.4495" y="118.96946" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="118.61002" y="118.98121" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="177.9302" y="119.0047" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="0.05169" y="178.31855" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="59.4495" y="178.37871" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="118.61002" y="178.39046" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="177.9302" y="178.41395" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="0.05169" y="237.67423" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="59.4495" y="237.73439" width="56.11284" height="56.11284"></rect>
            <rect class="cls-2" x="118.61003" y="237.74613" width="56.11285" height="56.11281"></rect>
            <rect class="cls-2" x="177.9302" y="237.76963" width="56.11284" height="56.11284"></rect>
            <circle class="cls-3" cx="28.10811" cy="28.40258" r="17.77298"></circle>
            <circle class="cls-3" cx="87.50592" cy="28.48625" r="17.77298"></circle>
            <circle class="cls-3" cx="205.93014" cy="147.62242" r="17.77298"></circle>
            <circle class="cls-3" cx="27.75183" cy="206.58113" r="17.77298"></circle>
            <circle class="cls-3" cx="87.14964" cy="206.37497" r="17.77298"></circle>
            <circle class="cls-3" cx="205.93014" cy="206.52757" r="17.77298"></circle>
            <circle class="cls-3" cx="27.75183" cy="266.39172" r="17.77298"></circle>
            <circle class="cls-3" cx="87.14964" cy="267.64814" r="17.77298"></circle>
            <circle class="cls-3" cx="205.93014" cy="266.33815" r="17.77298"></circle>
            <rect class="cls-4" x="238.60313" y="2.47146" width="55.147" height="290.43915"></rect>
            <circle class="cls-3" cx="27.68222" cy="87.35202" r="17.77298"></circle>
            </g>
            <g id="right-path">
            <line class="cls-5" x1="147.26" y1="87.94907" x2="244.851" y2="87.94907" style="stroke-width: 10px;"></line>
            </g>
            <g id="up-path">
            <polyline class="cls-6" points="147.26 87.949 147.26 26.856 186.377 26.856" style="stroke-width: 10px;"></polyline>
            </g>
            <g id="downstream">
            <polyline class="cls-7" points="147.111 268.043 147.111 133.574 147.111 84.699" style="stroke: rgb(120, 140, 218);"></polyline>
            <path class="cls-7" d="M27.75183,148.02255H69.62388a17.69918,17.69918,0,0,0,17.70937-17.70937l-.04514-24.72539a17.69919,17.69919,0,0,1,17.70937-17.70937l24.48954.07065h17.59692" style="stroke: rgb(120, 140, 218);"></path>
            <circle class="cls-8" cx="27.75183" cy="147.67598" r="17.77298" style="fill: rgb(120, 140, 218);"></circle>
            <circle class="cls-8" cx="87.14964" cy="147.75966" r="17.77298" style="fill: rgb(120, 140, 218);"></circle>
            <circle class="cls-8" cx="147.26" cy="147.75966" r="17.77298" style="fill: rgb(120, 140, 218);"></circle>
            <circle class="cls-8" cx="147.26" cy="206.6648" r="17.77298" style="fill: rgb(120, 140, 218);"></circle>
            <circle class="cls-8" cx="147.26001" cy="266.47539" r="17.77299" style="fill: rgb(120, 140, 218);"></circle>
            <circle class="cls-8" cx="147.26" cy="87.94907" r="17.77298" style="fill: rgb(120, 140, 218);"></circle>
            <circle class="cls-8" cx="87.14964" cy="87.94907" r="17.77298" style="fill: rgb(120, 140, 218);"></circle>
            </g>
            <g id="foreground">
            <circle class="cls-4" cx="205.93014" cy="87.81183" r="17.77298"></circle>
            <circle class="cls-1" cx="147.61628" cy="28.48625" r="17.77298"></circle>
            <text class="cls-9" transform="translate(188.17039 33.69667)">+2</text>
            <text class="cls-9" transform="translate(248.31443 96.99745)">-1</text>
            </g>
        </svg>
        <div class="figcaption">
            <div>Weight of upward path: <span id="q-value-label">0.50</span></div>
            <d-slider id="q-value-slider" min="0" max="1" step="0.01" ticks="10" style="width: 95%;" value="0.5" aria-valuemin="0" aria-valuemax="1" aria-valuenow="0.5" role="slider" tabindex="0"></d-slider>
            Whenever we re-weight Q-values, we also re-weight the paths that pass through them.
        </div>
    </div>
</figure>
<script src="The%20Paths%20Perspective%20on%20Value%20Learning_files/reweighting.js"></script>


    <p>
      Wherever intersecting paths are re-weighted, the paths that are 
most representative of the off-policy distribution end up making larger 
contributions to the value estimate. Meanwhile, paths that have low 
probability make smaller contributions.
    </p>

    <p>
      <b>Q-learning.</b> There are many cases where an agent needs to 
collect experience under a sub-optimal policy (e.g. to improve 
exploration) while estimating value under an optimal one. In these 
cases, we use a version of off-policy learning called Q-learning.
    </p>

    <style>
      
    </style>
    <figure id="q-learning" class="l-body two-column-math">
        <div class="wrapper">
            <div class="figcaption">
                <b>Q-learning</b> estimates value under the optimal policy by choosing the max Q-value.
            </div>
            <img class="diagram" src="The%20Paths%20Perspective%20on%20Value%20Learning_files/q-learning.svg">
        </div>
    </figure>

   <p>
     Q-learning prunes away all but the highest-valued paths. The paths 
that remain are the paths that the agent will follow at test time; they 
are the only ones it needs to pay attention to. This sort of value 
learning often leads to faster convergence than on-policy methods<d-footnote id="d-footnote-4">Try using the Playground at the end of this article to compare between approaches.</d-footnote>.
   </p>

    <p>
      <b>Double Q-Learning.</b> The problem with Q-learning is that it 
gives biased value estimates. More specifically, it is over-optimistic 
in the presence of noisy rewards. Here’s an example where Q-learning 
fails:
    </p>

    <p>
      <i>You go to a casino and play a hundred slot machines. It’s your 
lucky day: you hit the jackpot on machine 43. Now, if you use Q-learning
 to estimate the value of being in the casino, you will choose the best 
outcome over the actions of playing slot machines. You’ll end up 
thinking that the value of the casino is the value of the jackpot…and 
decide that the casino is a great place to be!</i>
    </p>

    <p>
      Sometimes the largest Q-value of a state is large <i>just by chance</i>;
 choosing it over others makes the value estimate biased.
      One way to reduce this bias is to have a friend visit the casino 
and play the same set of slot machines. Then, ask them what their 
winnings were at machine 43 and use their response as your value 
estimate. It’s not likely that you both won the jackpot on the same 
machine, so this time you won’t end up with an over-optimistic estimate.
 We call this approach <i>Double Q-learning</i>.<d-cite key="VanHasselt2010DoubleQ-learning"></d-cite>
    </p>

    <p>
      <b>Putting it together. </b> It’s easy to think of Sarsa, Expected
 Sarsa, Q-learning, and Double Q-learning as different algorithms. But 
as we’ve seen, they are simply different ways of estimating <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">V(s_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> in a TD update.
    </p>

    <figure id="overview" class="l-page two-column-math">
        <div class="wrapper">
            <h4>On-policy methods</h4>
            <div></div>
            <div class="figcaption" id="overview-caption">
                <b>Sarsa</b> uses the Q-value associated with <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">a_{t+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="base"><span class="mord"><span class="mord mathit">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span></span></span></span></span> to estimate the next state’s value.
            </div>
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/sarsa.svg">
            <div class="figcaption">
                <b>Expected Sarsa</b> uses an expectation over Q-values to estimate the next state’s value.
            </div>
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/expected-sarsa.svg">

            <h4>Off-policy methods</h4>
            <div></div>

            <div class="figcaption">
                <b>Off-policy value learning</b> weights Q-values by an arbitrary policy.
            </div>
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/off-policy.svg">
            <div class="figcaption">
                <b>Q-learning</b> estimates value under the optimal policy by choosing the max Q-value.
            </div>
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/q-learning.svg">
            <div class="figcaption">
                <b>Double Q-learning</b> selects the best action with <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Q</mi><mi>A</mi></msub></mrow><annotation encoding="application/x-tex">Q_A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord"><span class="mord mathit">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span></span> and then estimates the value of that action with
                <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Q</mi><mi>B</mi></msub></mrow><annotation encoding="application/x-tex">Q_B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord"><span class="mord mathit">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span></span>.
            </div>
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/double-q-learning.svg">
        </div>
    </figure>

    <p>
      The intuition behind all of these approaches is that they re-weight path intersections.
    </p>

    <p>
      <b>Re-weighting paths with Monte Carlo.</b> At this point, a 
natural question is: Could we accomplish the same re-weighting effect 
with Monte Carlo? We could, but it would be messier and involve 
re-weighting all of the agent’s experience. By working at intersections,
 TD learning re-weights individual transitions instead of episodes as a 
whole. This makes TD methods much more convenient for off-policy 
learning.
    </p>


    <h2>Merging Paths with Function Approximators</h2>

    <p>
      Up until now, we’ve learned one parameter — the value 
estimate — for every state or every state-action pair. This works well 
for the Cliff World example because it has a small number of states. But
 most interesting RL problems have a large or infinite number of states.
 This makes it hard to store value estimates for each state.
      <!-- ut as the number of states becomes large or infinite -- as is the case in many interesting RL problems -- it becomes impossible to store a value estimate for each state. -->
    </p>

    <style>
        #figure-fnapprox-intro {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            grid-column-gap: 20px;
            grid-row-gap: 10px;
            /* grid-auto-flow: column; */
        }
    </style>
    <figure id="figure-fnapprox-intro" class="l-page">
        <div class="wrapper">
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/large-cliffworld-states.svg">
            <div class="figcaption">
                <b>Large or infinite state spaces</b> are a characteristic of many interesting RL problems. Value estimation
                in these spaces often requires function approximation.
            </div>
        </div>

        <div class="wrapper">
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/large-cliffworld-path.svg">
            <div class="figcaption">
                <b>Tabular value functions</b> keep value estimates for each individual state. They consume a great deal of
                memory and don’t generalize.
            </div>
        </div>

        <div class="wrapper">
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/large-cliffworld-approx.svg">
            <div class="figcaption">
                <b>Euclidean averagers</b> – which are a type of function approximator – save memory and let agents
                generalize to states they haven’t visited yet.
            </div>
        </div>
    </figure>

    <p>
      Instead, we must force our value estimator to have fewer 
parameters than there are states. We can do this with machine learning 
methods such as linear regression, decision trees, or neural networks. 
All of these methods fall under the umbrella of function approximation.
    </p>

<!--     <p>
      An interesting property of function approximation is that updating one parameter will tend to change more than one value estimate. Let's see how this changes things by returning to the Cliff World example. This time, we'll give the environment many more states.
    </p> -->

    <p>
      <b>Merging nearby paths.</b> From the paths perspective, we can 
interpret function approximation as a way of merging nearby paths. But 
what do we mean by “nearby”? In the figure above, we made an implicit 
decision to measure “nearby” with Euclidean distance. This was a good 
idea because the Euclidean distance between two states is highly 
correlated with the probability that the agent will transition between 
them.
    </p>

    <p>
      However, it’s easy to imagine cases where this implicit assumption
 breaks down. By adding a single long barrier, we can construct a case 
where the Euclidean distance metric leads to bad generalization. The 
problem is that we have merged the wrong paths.
    </p>

    <style>
        #fnapprox-barrier .wrapper {
            margin-left: auto;
            margin-right: auto;
            display: grid;
            grid-template-columns: 1fr 1.464fr;
            grid-template-rows: auto auto;
            grid-column-gap: 20px;
            grid-row-gap: 10px;
            grid-auto-flow: column;
        }
    </style>
    <figure id="fnapprox-barrier" class="l-page">
        <div class="wrapper">
            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/large-cliffworld-barrier-intro.svg">
            <div class="figcaption">
                Imagine changing the Cliff World setup by adding a long barrier.
            </div>

            <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/large-cliffworld-barrier.svg">
            <div class="figcaption">
                Now, using the Euclidean averager leads to bad value updates.
            </div>
        </div>
    </figure>

    <p>
      <b>Merging the wrong paths.</b> The diagram below shows the 
effects of merging the wrong paths a bit more explicitly. Since the 
Euclidean averager is to blame for poor generalization, both Monte Carlo
 and TD make bad value updates. However, TD learning amplifies these 
errors dramatically whereas Monte Carlo does not.
    </p>
    <figure id="fnapprox-compare" class="l-page">
      <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/compare-function-approx.svg">
    </figure>

    <p>
      We’ve seen that TD learning makes more efficient value updates. 
The price we pay is that these updates end up being much more sensitive 
to bad generalization.
    </p>



    <h2>Implications for deep reinforcement learning</h2>

    <p>
      <b>Neural networks.</b> Deep neural networks are perhaps the most 
popular function approximators for reinforcement learning. These models 
are exciting for many reasons, but one particularly nice property is 
that they don’t make implicit assumptions about which states are 
“nearby.”
    </p>

    <p>
      Early in training, neural networks, like averagers, tend to merge 
the wrong paths of experience. In the Cliff Walking example, an 
untrained neural network might make the same bad value updates as the 
Euclidean averager.
    </p>

    <p>
      But as training progresses, neural networks can actually learn to 
overcome these errors. They learn which states are “nearby” from 
experience. In the Cliff World example, we might expect a fully-trained 
neural network to have learned that value updates to states <i>above</i> the barrier should never affect the values of states <i>below</i>
 the barrier. This isn’t something that most other function 
approximators can do. It’s one of the reasons deep RL is so interesting!
    </p>

  <figure id="nn-latent-distance" class="l-text">
      <img src="The%20Paths%20Perspective%20on%20Value%20Learning_files/latent-distance.png">
      <figcaption>
        A distance metric learned by a neural network <d-cite key="Srinivas2018UniversalNetworks"></d-cite>. <b>Lighter blue <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.36687em;"></span><span class="strut bottom" style="height:0.36687em;vertical-align:0em;"></span><span class="base"><span class="mrel">→</span></span></span></span></span> more distant</b>.
 The agent, which was trained to grasp objects using the robotic arm, 
takes into account obstacles and arm length when it measures the 
distance between two states.
      </figcaption>
  </figure>

    <p>
      <b>TD or not TD?</b> So far, we’ve seen how TD learning can 
outperform Monte Carlo by merging paths of experience where they 
intersect. We’ve also seen that merging paths is a double-edged sword: 
when function approximation causes bad value updates, TD can end up 
doing worse.
    </p>

    <p>

      Over the last few decades, most work in RL has preferred TD 
learning to Monte Carlo. Indeed, many approaches to RL use TD-style 
value updates. With that being said, there are many other ways to use 
Monte Carlo for reinforcement learning. Our discussion centers around 
Monte Carlo for value estimation in this article, but it can also be 
used for policy selection as in Silver et al.<d-cite key="silver2017mastering"></d-cite>
<!--       There's an informal consensus that TD works better than Monte Carlo for deep RL. Indeed, TD methods have dominated the RL literature for the past several decades. There are still some notable exceptions: one recent paper shows that Monte Carlo can outperform TD methods in certain environments<d-cite key="Amiranashvili2018TDLearning"></d-cite>. -->
    </p>

    <p>
      Since Monte Carlo and TD learning both have desirable properties, 
why not try building a value estimator that is a mixture of the two? 
That’s the reasoning behind TD(<span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">λ</span></span></span></span></span>) learning. It’s a technique that simply interpolates (using the coefficient <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">λ</span></span></span></span></span>) between Monte Carlo and TD updates<d-footnote id="d-footnote-5">In the limit <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\lambda=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">λ</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span></span>, we recover the TD update rule. Meanwhile, when <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\lambda=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">λ</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span></span>, we recover Monte Carlo.</d-footnote>. Often, TD(<span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">λ</span></span></span></span></span>) works better than either Monte Carlo or TD learning alone<d-footnote id="d-footnote-6">Researchers often keep the <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">λ</span></span></span></span></span>
 coefficient constant as they train a deep RL model. However, if we 
think Monte Carlo learning is best early in training (before the agent 
has learned a good state representation) and TD learning is best later 
on (when it’s easier to benefit from merging paths), maybe the best 
approach is to anneal <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">λ</span></span></span></span></span> over the course of training.</d-footnote>.
    </p>


    <h2>Conclusion</h2>

    <p>
      In this article we introduced a new way to think about TD 
learning. It helps us see why TD learning can be beneficial, why it can 
be effective for off-policy learning, and why there can be challenges in
 combining TD learning with function approximators.
    </p>

    <p>
      We encourage you to use the playground below to build on these intuitions, or to try an experiment of your own.
    </p>

    <h4>Gridworld playground</h4>

    <div id="playground"><div class="controls"><div class="control-panel"><h5>Learning Algorithm</h5><select style="width: 100%;" size="4"><option value="MC" selected="selected">Monte Carlo</option><option value="SARSA">Sarsa</option><option value="SARSA_V">Expected Sarsa</option><option value="Q">Q-Learning</option></select></div><div class="control-panel"><h5>Visualization</h5><select style="width: 100%;" size="3"><option value="policy">Policy</option><option value="Q">Q(s,a)</option><option value="V" selected="selected">V(s)</option></select></div><div class="control-panel"><div style="position: relative; margin: 0px; display: block;"><h5>Epsilon-greedy policy</h5><d-slider id="playground-policy-slider" type="range" min="0" max="100" step="0.5" value="50" style="width: 100%;" aria-valuemin="0" aria-valuemax="100" aria-valuenow="50" role="slider" tabindex="0"></d-slider><div><label for="playground-policy-slider" class="label">explore</label><label for="playground-policy-slider" class="label" style="float: right;">exploit</label></div><button style="width: 100%;">Add an agent</button></div></div></div><div class="visualization"><svg style="width: 100%; user-select: none;"><g class="grid"><g class="cell pos-0-0" transform="translate(0,0)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-1-0" transform="translate(60,0)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-2-0" transform="translate(120,0)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-3-0" transform="translate(180,0)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-4-0" transform="translate(240,0)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-0-1" transform="translate(0,60)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-1-1" transform="translate(60,60)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-2-1" transform="translate(120,60)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-3-1" transform="translate(180,60)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-4-1" transform="translate(240,60)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-0-2" transform="translate(0,120)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-1-2" transform="translate(60,120)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-2-2" transform="translate(120,120)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-3-2" transform="translate(180,120)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-4-2" transform="translate(240,120)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-0-3" transform="translate(0,180)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-1-3" transform="translate(60,180)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-2-3" transform="translate(120,180)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-3-3" transform="translate(180,180)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(189, 95, 55);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(189, 95, 55);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(153, 147, 147);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(153, 147, 147);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(153, 147, 147);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(189, 182, 182);"></path></g></g><g class="cell pos-4-3" transform="translate(240,180)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-0-4" transform="translate(0,240)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-1-4" transform="translate(60,240)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g class="cell pos-2-4" transform="translate(120,240)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(203, 127, 89);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(203, 127, 89);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(153, 147, 147);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(153, 147, 147);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(153, 147, 147);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(189, 182, 182);"></path></g></g><g class="cell pos-3-4" transform="translate(180,240)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(197, 113, 74);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(197, 113, 74);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(153, 147, 147);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(189, 182, 182);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(153, 147, 147);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(153, 147, 147);"></path></g></g><g class="cell pos-4-4" transform="translate(240,240)"><rect class="background" width="57" height="57"></rect><g class="V" transform="translate(28.5,28.5)"><circle r="18" style="fill: rgb(204, 204, 204);"></circle></g><g class="Q" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(204, 204, 204);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(204, 204, 204);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(204, 204, 204);"></path></g><g class="P" style="display: none;" transform="translate(28.5,28.5)"><path class="triangle up" transform="translate(0,10.799999999999999)" d="M-9,3.6L0,9L9,3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle down" transform="translate(0,-10.799999999999999)" d="M-9,-3.6L0,-9L9,-3.6" style="fill: rgb(162, 156, 156);"></path><path class="triangle left" transform="translate(-10.799999999999999,0)" d="M-3.6,-9L-9,0L-3.6,9" style="fill: rgb(162, 156, 156);"></path><path class="triangle right" transform="translate(10.799999999999999,0)" d="M3.6,-9L9,0L3.6,9" style="fill: rgb(162, 156, 156);"></path></g></g><g></g><rect class="goal" width="57" height="57" data-x="3" data-y="0" transform="translate(180,0)"></rect><text transform="translate(193.20000000000002,36)" style="fill: rgb(202, 201, 204); font: bold 30px sans-serif;">+2</text><rect class="cliff" width="57" height="297" data-x="4" data-y="0" transform="translate(240,0)" style=""></rect><text transform="translate(255.6,156)" style="fill: rgb(202, 201, 204); font: bold 30px sans-serif;">-1</text></g></svg></div></div>
    <script src="The%20Paths%20Perspective%20on%20Value%20Learning_files/Playground.js" charset="utf-8"></script>

</d-article>



<d-appendix>
<style>

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

</style>



  <h3>Acknowledgments</h3>
  <p>
        We are grateful to Ludwig Schubert, Justin Gilmer, Shan Carter, 
and John Schulman for feedback on early drafts of this article. Shan 
also gave invaluable design advice on diagrams and interactive 
components. Thanks to Cassandra Xia for helping develop the playground 
demo.
  </p>

  <p>
    Sam would like to thank the <a href="https://ai.google/research/join-us/ai-residency/">Google AI Residency Program</a> for offering continuous support and guidance as he explored this line of research.
  </p>

  <h3>Author Contributions</h3>
  <p>
    <b>Concepts:</b> Chris introduced the central concept and structure 
of this article. Working together, Sam and Chris fleshed out the finer 
points.
  </p>
  <p>
    <b>Writing &amp; Diagrams:</b> The text and figures were initially 
drafted by Sam and then refined under Chris’s guidance. The code used 
for the hero and playground visualizations was written by Chris and 
Cassandra and modified by Sam to fit the Distill format.
  </p>


  <d-footnote-list style="">
<style>

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}

</style>

<h3>Footnotes</h3>
<ol><li id="d-footnote-1-listing">For many approaches (policy-value 
iteration), estimating value essentially is the whole problem, while in 
other approaches (actor-critic models), value estimation is essential 
for reducing noise.<a class="footnote-backlink" href="#d-footnote-1">[↩]</a></li><li id="d-footnote-2-listing">

    In tabular settings such as the Cliff World example, this “update 
towards” operator computes a running average. More specifically, the <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>n</mi><mrow><mi>t</mi><mi>h</mi></mrow></msup></mrow><annotation encoding="application/x-tex">n^{th}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.849108em;"></span><span class="strut bottom" style="height:0.849108em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mord mathit mtight">h</span></span></span></span></span></span></span></span></span></span></span></span></span> Monte Carlo update is <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mo>=</mo><mi>V</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>)</mo><mo>+</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>n</mi></mrow></mfrac><mo fence="true">[</mo><msub><mi>R</mi><mi>n</mi></msub><mo>−</mo><mi>V</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex"> V(s_t) = V(s_{t-1}) + \frac{1}{n} \bigr[ R_{n} - V(s_t) \bigl] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.85em;"></span><span class="strut bottom" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">t</span><span class="mbin mtight">−</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"></span></span></span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mbin">−</span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">)</span><span class="mopen"><span class="delimsizing size1">]</span></span></span></span></span></span>
 and we could just as easily use the “+=” notation. But when using 
parameteric function approximators such as neural networks, our “update 
towards” operator may represent a gradient step, which cannot be written
 in “+=” notation. In order to keep our notation clean and general, we 
chose to use the <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>↩</mo></mrow><annotation encoding="application/x-tex">\hookleftarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.511em;"></span><span class="strut bottom" style="height:0.522em;vertical-align:-0.011em;"></span><span class="base"><span class="mrel">↩</span></span></span></span></span> operator throughout.<a class="footnote-backlink" href="#d-footnote-2">[↩]</a></li><li id="d-footnote-3-listing">Also written as an expectation value, hence “Expected Sarsa”.<a class="footnote-backlink" href="#d-footnote-3">[↩]</a></li><li id="d-footnote-4-listing">Try using the Playground at the end of this article to compare between approaches.<a class="footnote-backlink" href="#d-footnote-4">[↩]</a></li><li id="d-footnote-5-listing">In the limit <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\lambda=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">λ</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span></span>, we recover the TD update rule. Meanwhile, when <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\lambda=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">λ</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span></span>, we recover Monte Carlo.<a class="footnote-backlink" href="#d-footnote-5">[↩]</a></li><li id="d-footnote-6-listing">Researchers often keep the <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">λ</span></span></span></span></span>
 coefficient constant as they train a deep RL model. However, if we 
think Monte Carlo learning is best early in training (before the agent 
has learned a good state representation) and TD learning is best later 
on (when it’s easier to benefit from merging paths), maybe the best 
approach is to anneal <span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">λ</span></span></span></span></span> over the course of training.<a class="footnote-backlink" href="#d-footnote-6">[↩]</a></li></ol>
</d-footnote-list>
  <d-citation-list distill-prerendered="true"><style>
d-citation-list {
  contain: style;
}

d-citation-list .references {
  grid-column: text;
}

d-citation-list .references .title {
  font-weight: 500;
}
</style><h3 id="references">References</h3><ol id="references-list" class="references"><li id="Sutton2017ReinforcementIntroduction"><span class="title">Reinforcement Learning: An Introduction</span>   <a href="http://incompleteideas.net/book/the-book-2nd.html">[HTML]</a><br>Sutton, R. and Barto, A., 2017. MIT Press.</li><li id="VanHasselt2010DoubleQ-learning"><span class="title">Double Q-learning</span>   <a href="https://papers.nips.cc/paper/3964-double-q-learning.pdf">[PDF]</a><br>Van Hasselt, H., 2010. Advances in Neural Information Processing Systems. </li><li id="Srinivas2018UniversalNetworks"><span class="title">Universal Planning Networks</span>   <a href="http://arxiv.org/pdf/1804.00645.pdf">[PDF]</a><br>Srinivas, A., Jabri, A., Abbeel, P., Levine, S. and Finn, C., 2018. Proceedings of Machine Learning Research. </li><li id="silver2017mastering"><span class="title">Mastering the game of go without human knowledge</span> <br>Silver,
 D., Schrittwieser, J., Simonyan, K., Antonoglou, I., Huang, A., Guez, 
A., Hubert, T., Baker, L., Lai, M., Bolton, A. and others,, 2017. 
Nature, Vol 550(7676), pp. 354. Nature Publishing Group.</li></ol></d-citation-list>
<distill-appendix>
<style>
  distill-appendix {
    contain: layout style;
  }

  distill-appendix .citation {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  distill-appendix > * {
    grid-column: text;
  }
</style>

    <h3 id="updates-and-corrections">Updates and Corrections</h3>
    <p>
    If you see mistakes or want to suggest changes, please <a href="https://github.com/distillpub/post--td-paths/issues/new">create an issue on GitHub</a>. </p>
    
    <h3 id="reuse">Reuse</h3>
    <p>Diagrams and text are licensed under Creative Commons Attribution <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY 4.0</a> with the <a class="github" href="https://github.com/distillpub/post--td-paths">source available on GitHub</a>,
 unless noted otherwise. The figures that have been reused from other 
sources don’t fall under this license and can be recognized by a note in
 their caption: “Figure from …”.</p>
    
    <h3 id="citation">Citation</h3>
    <p>For attribution in academic contexts, please cite this work as</p>
    <pre class="citation short">Greydanus &amp; Olah, "The Paths Perspective on Value Learning", Distill, 2019.</pre>
    <p>BibTeX citation</p>
    <pre class="citation long">@article{greydanus2019the,
  author = {Greydanus, Sam and Olah, Chris},
  title = {The Paths Perspective on Value Learning},
  journal = {Distill},
  year = {2019},
  note = {https://distill.pub/2019/paths-perspective-on-value-learning},
  doi = {10.23915/distill.00020}
}</pre>
    </distill-appendix></d-appendix>

<d-bibliography><script type="text/json">[["Sutton2017ReinforcementIntroduction",{"title":"Reinforcement Learning: An Introduction","year":"2017","author":"Sutton, Richard and Barto, Andrew","publisher":"MIT Press","url":"http://incompleteideas.net/book/the-book-2nd.html","address":"Cambridge","type":"book"}],["Amiranashvili2018TDLearning",{"title":"TD or not TD: Analyzing the Role of Temporal Differencing in Deep Reinforcement Learning","year":"2018","journal":"International Conference on Learning Representations","author":"Amiranashvili, Artemij and Dosovitskiy, Alexey and Koltun, Vladlen and Brox, Thomas","url":"https://arxiv.org/abs/1806.01175","isbn":"1806.01175v1","arxivId":"arXiv:1806.01175v1","arxivid":"arXiv:1806.01175v1","type":"article"}],["Srinivas2018UniversalNetworks",{"title":"Universal Planning Networks","year":"2018","journal":"Proceedings of Machine Learning Research","author":"Srinivas, Aravind and Jabri, Allan and Abbeel, Pieter and Levine, Sergey and Finn, Chelsea","url":"https://arxiv.org/abs/1804.00645v2","arxivId":"1804.00645","arxivid":"1804.00645","type":"article"}],["VanHasselt2010DoubleQ-learning",{"title":"Double Q-learning","year":"2010","journal":"Advances in Neural Information Processing Systems","author":"Van Hasselt, Hado","url":"https://papers.nips.cc/paper/3964-double-q-learning.pdf","type":"article"}],["silver2017mastering",{"title":"Mastering the game of go without human knowledge","author":"Silver, David and Schrittwieser, Julian and Simonyan, Karen and Antonoglou, Ioannis and Huang, Aja and Guez, Arthur and Hubert, Thomas and Baker, Lucas and Lai, Matthew and Bolton, Adrian and others","journal":"Nature","volume":"550","number":"7676","pages":"354","year":"2017","publisher":"Nature Publishing Group","type":"article"}]]</script></d-bibliography>

<script type="text/javascript" src="The%20Paths%20Perspective%20on%20Value%20Learning_files/index.js"></script>

<distill-footer>
<style>

:host {
  color: rgba(255, 255, 255, 0.5);
  font-weight: 300;
  padding: 2rem 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  background-color: hsl(180, 5%, 15%); /*hsl(200, 60%, 15%);*/
  text-align: left;
  contain: content;
}

.footer-container .logo svg {
  width: 24px;
  position: relative;
  top: 4px;
  margin-right: 2px;
}

.footer-container .logo svg path {
  fill: none;
  stroke: rgba(255, 255, 255, 0.8);
  stroke-width: 3px;
}

.footer-container .logo {
  font-size: 17px;
  font-weight: 200;
  color: rgba(255, 255, 255, 0.8);
  text-decoration: none;
  margin-right: 6px;
}

.footer-container {
  grid-column: text;
}

.footer-container .nav {
  font-size: 0.9em;
  margin-top: 1.5em;
}

.footer-container .nav a {
  color: rgba(255, 255, 255, 0.8);
  margin-right: 6px;
  text-decoration: none;
}

</style>

<div class="footer-container">

  <a href="https://distill.pub/" class="logo">
    <svg viewBox="-607 419 64 64">
  <path d="M-573.4,478.9c-8,0-14.6-6.4-14.6-14.5s14.6-25.9,14.6-40.8c0,14.9,14.6,32.8,14.6,40.8S-565.4,478.9-573.4,478.9z"></path>
</svg>

    Distill
  </a> is dedicated to clear explanations of machine learning

  <div class="nav">
    <a href="https://distill.pub/about/">About</a>
    <a href="https://distill.pub/journal/">Submit</a>
    <a href="https://distill.pub/prize/">Prize</a>
    <a href="https://distill.pub/archive/">Archive</a>
    <a href="https://distill.pub/rss.xml">RSS</a>
    <a href="https://github.com/distillpub">GitHub</a>
    <a href="https://twitter.com/distillpub">Twitter</a>
    &nbsp;&nbsp;&nbsp;&nbsp; ISSN 2476-0757
  </div>

</div>

</distill-footer><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-83741880-1', 'auto');
  ga('send', 'pageview');
</script></body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>