<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta charset="utf-8">
<link href="How%20to%20Use%20t-SNE%20Effectively_files/material-icons.css" rel="stylesheet">

<script async="" src="How%20to%20Use%20t-SNE%20Effectively_files/analytics.js"></script><script type="text/front-matter">
  title: How to Use t-SNE Effectively
  description: Although extremely useful for visualizing high-dimensional data, t-SNE plots can sometimes be mysterious or misleading.
  authors:
    - Martin Wattenberg: http://hint.fm/
    - "Fernanda Viégas": http://hint.fm/
    - Ian Johnson: http://enjalot.github.io/
  affiliations:
    - Google Brain: http://g.co/brain
    - Google Brain: http://g.co/brain
    - Google Cloud: http://cloud.google.com
</script>

<script src="How%20to%20Use%20t-SNE%20Effectively_files/d3.js"></script>
<script src="How%20to%20Use%20t-SNE%20Effectively_files/tsne.js"></script>
<script src="How%20to%20Use%20t-SNE%20Effectively_files/demo-configs.js"></script>
<script src="How%20to%20Use%20t-SNE%20Effectively_files/figure-configs.js"></script>
<script src="How%20to%20Use%20t-SNE%20Effectively_files/visualize.js"></script>
<script src="How%20to%20Use%20t-SNE%20Effectively_files/figures.js"></script>

<style>

/* Resets */

input[type=range] {
  -webkit-appearance: none; /* Hides the slider so that custom slider can be made */
  width: 100%; /* Specific width is required for Firefox. */
  background: transparent; /* Otherwise white in Chrome */
}

input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
}

input[type=range]:focus {
  outline: none; /* Removes the blue border. You should probably do some kind of focus styling for accessibility reasons though. */
}

input[type=range]::-ms-track {
  width: 100%;
  cursor: pointer;

  /* Hides the slider so custom styles can be added */
  background: transparent;
  border-color: transparent;
  color: transparent;
}

/* Thumb */

/* Special styling for WebKit/Blink */
input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
  height: 14px;
  width: 14px;
  border-radius: 50%;
  background: steelblue;
  cursor: pointer;
  margin-top: -6px; /* You need to specify a margin in Chrome, but in Firefox and IE it is automatic */
}

/* All the same stuff for Firefox */
input[type=range]::-moz-range-thumb {
  height: 14px;
  width: 14px;
  border-radius: 50%;
  background: steelblue;
  cursor: pointer;
  border: none;
}

/* All the same stuff for IE */
input[type=range]::-ms-thumb {
  height: 14px;
  width: 14px;
  border-radius: 50%;
  background: grey;
  cursor: pointer;
}

/* Track */

input[type=range]::-webkit-slider-runnable-track {
  width: 100%;
  height: 3px;
  cursor: pointer;
  background: rgba(0, 0, 0, 0.1);
  border-radius: 2px;
  border: none;
}

input[type=range]:focus::-webkit-slider-runnable-track {
  background: rgba(0, 0, 0, 0.15);
}

input[type=range]::-moz-range-track {
  width: 100%;
  height: 3px;
  cursor: pointer;
  background: rgba(0, 0, 0, 0.1);
  border-radius: 2px;
  border: none;
}

input[type=range]::-ms-track {
  width: 100%;
  height: 3px;
  cursor: pointer;
  background: rgba(0, 0, 0, 0.1);
  border-radius: 2px;
  border: none;
}
input[type=range]::-ms-fill-lower {
  background: rgba(0, 0, 0, 0.1);
}
input[type=range]:focus::-ms-fill-lower {
  background: rgba(0, 0, 0, 0.1);
}
input[type=range]::-ms-fill-upper {
  background: rgba(0, 0, 0, 0.1);
}
input[type=range]:focus::-ms-fill-upper {
  background: rgba(0, 0, 0, 0.1);
}
</style>

<meta name="viewport" content="width=device-width, initial-scale=1"><style>html {
  font: 400 16px/1.55em -apple-system, BlinkMacSystemFont, "Roboto", Helvetica, sans-serif;
  /*background-color: hsl(223, 9%, 25%);*/
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}
body {
  margin: 0;
  /*background-color: hsl(223, 9%, 25%);*/
}

a {
  color: #004276;
}

figure {
  margin: 0;
}

h1 {
  font-family: Cochin, Georgia, serif;
}

/*
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
	margin: 0;
	padding: 0;
	border: 0;
	font-size: 100%;
	font: inherit;
	vertical-align: baseline;
}
article, aside, details, figcaption, figure,
footer, header, hgroup, menu, nav, section {
	display: block;
}
body {
	line-height: 1;
}
ol, ul {
	list-style: none;
}
blockquote, q {
	quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
	content: '';
	content: none;
}
table {
	border-collapse: collapse;
	border-spacing: 0;
}*/
/*
  Column: 60px
  Gutter: 24px

  Body: 648px
    - 8 columns
    - 7 gutters
  Middle: 816px
  Page: 984px
    - 12 columns
    - 11 gutters
*/

.l-body,
.l-body-outset,
.l-page,
.l-page-outset,
.l-middle,
.l-middle-outset,
dt-article > div,
dt-article > p,
dt-article > h1,
dt-article > h2,
dt-article > h3,
dt-article > h4,
dt-article > figure,
dt-article > table,
dt-article > ol,
dt-article > ul,
dt-article > dt-byline,
dt-article > dt-math,
dt-article > dt-code,
dt-article section > div,
dt-article section > p,
dt-article section > h1,
dt-article section > h2,
dt-article section > h3,
dt-article section > h4,
dt-article section > figure,
dt-article section > table,
dt-article section > ol,
dt-article section > ul,
dt-article section > dt-byline,
dt-article section > dt-code {
  width: auto;
  margin-left: 24px;
  margin-right: 24px;
  box-sizing: border-box;
}

@media(min-width: 768px) {
  .l-body,
  .l-body-outset,
  .l-page,
  .l-page-outset,
  .l-middle,
  .l-middle-outset,
  dt-article > div,
  dt-article > p,
  dt-article > h1,
  dt-article > h2,
  dt-article > h3,
  dt-article > h4,
  dt-article > figure,
  dt-article > table,
  dt-article > ol,
  dt-article > ul,
  dt-article > dt-byline,
  dt-article > dt-math,
  dt-article > dt-code,
  dt-article section > div,
  dt-article section > p,
  dt-article section > h1,
  dt-article section > h2,
  dt-article section > h3,
  dt-article section > h4,
  dt-article section > figure,
  dt-article section > table,
  dt-article section > ol,
  dt-article section > ul,
  dt-article section > dt-byline,
  dt-article section > dt-code {
    margin-left: 72px;
    margin-right: 72px;
  }
}

@media(min-width: 1080px) {
  .l-body,
  dt-article > div,
  dt-article > p,
  dt-article > h2,
  dt-article > h3,
  dt-article > h4,
  dt-article > figure,
  dt-article > table,
  dt-article > ol,
  dt-article > ul,
  dt-article > dt-byline,
  dt-article > dt-math,
  dt-article > dt-code,
  dt-article section > div,
  dt-article section > p,
  dt-article section > h2,
  dt-article section > h3,
  dt-article section > h4,
  dt-article section > figure,
  dt-article section > table,
  dt-article section > ol,
  dt-article section > ul,
  dt-article section > dt-byline,
  dt-article section > dt-code {
    margin-left: calc(50% - 984px / 2);
    width: 648px;
  }
  .l-body-outset,
  dt-article .l-body-outset {
    margin-left: calc(50% - 984px / 2 - 96px/2);
    width: calc(648px + 96px);
  }
  .l-middle,
  dt-article .l-middle {
    width: 816px;
    margin-left: calc(50% - 984px / 2);
    margin-right: auto;
  }
  .l-middle-outset,
  dt-article .l-middle-outset {
    width: calc(816px + 96px);
    margin-left: calc(50% - 984px / 2 - 48px);
    margin-right: auto;
  }
  dt-article > h1,
  dt-article section > h1,
  .l-page,
  dt-article .l-page,
  dt-article.centered .l-page {
    width: 984px;
    margin-left: auto;
    margin-right: auto;
  }
  .l-page-outset,
  dt-article .l-page-outset,
  dt-article.centered .l-page-outset {
    width: 1080px;
    margin-left: auto;
    margin-right: auto;
  }
  .l-screen,
  dt-article .l-screen,
  dt-article.centered .l-screen {
    margin-left: auto;
    margin-right: auto;
    width: auto;
  }
  .l-screen-inset,
  dt-article .l-screen-inset,
  dt-article.centered .l-screen-inset {
    margin-left: 24px;
    margin-right: 24px;
    width: auto;
  }
  .l-gutter,
  dt-article .l-gutter {
    clear: both;
    float: right;
    margin-top: 0;
    margin-left: 24px;
    margin-right: calc((100vw - 984px) / 2 + 168px);
    width: calc((984px - 648px) / 2 - 24px);
  }

  /* Side */
  .side.l-body,
  dt-article .side.l-body {
    clear: both;
    float: right;
    margin-top: 0;
    margin-left: 48px;
    margin-right: calc((100vw - 984px + 648px) / 2);
    width: calc(648px / 2 - 24px - 84px);
  }
  .side.l-body-outset,
  dt-article .side.l-body-outset {
    clear: both;
    float: right;
    margin-top: 0;
    margin-left: 48px;
    margin-right: calc((100vw - 984px + 648px - 48px) / 2);
    width: calc(648px / 2 - 48px + 24px);
  }
  .side.l-middle,
  dt-article .side.l-middle {
    clear: both;
    float: right;
    width: calc(456px - 84px);
    margin-left: 48px;
    margin-right: calc((100vw - 984px) / 2 + 168px);
  }
  .side.l-middle-outset,
  dt-article .side.l-middle-outset {
    clear: both;
    float: right;
    width: 456px;
    margin-left: 48px;
    margin-right: calc((100vw - 984px) / 2 + 168px);
  }
  .side.l-page,
  dt-article .side.l-page {
    clear: both;
    float: right;
    margin-left: 48px;
    width: calc(624px - 84px);
    margin-right: calc((100vw - 984px) / 2);
  }
  .side.l-page-outset,
  dt-article .side.l-page-outset {
    clear: both;
    float: right;
    width: 624px;
    margin-right: calc((100vw - 984px) / 2);
  }
}

/* Centered */

@media(min-width: 1080px) {
  .centered .l-body,
  .centered.l-body,
  dt-article.centered > div,
  dt-article.centered > p,
  dt-article.centered > h2,
  dt-article.centered > h3,
  dt-article.centered > h4,
  dt-article.centered > figure,
  dt-article.centered > table,
  dt-article.centered > ol,
  dt-article.centered > ul,
  dt-article.centered > dt-byline,
  dt-article.centered > dt-code,
  dt-article.centered section > div,
  dt-article.centered section > p,
  dt-article.centered section > h2,
  dt-article.centered section > h3,
  dt-article.centered section > h4,
  dt-article.centered section > figure,
  dt-article.centered section > table,
  dt-article.cebtered section > ol,
  dt-article.centered section > ul,
  dt-article.centered section > dt-byline,
  dt-article.centered section > dt-code,
  dt-article section.centered > div,
  dt-article section.centered > p,
  dt-article section.centered > h2,
  dt-article section.centered > h3,
  dt-article section.centered > h4,
  dt-article section.centered > figure,
  dt-article section.centered > table,
  dt-article section.centered > ol,
  dt-article section.centered > ul,
  dt-article section.centered > dt-byline,
  dt-article section.centered > dt-code {
    margin-left: auto;
    margin-right: auto;
    width: 648px;
  }
  .centered .l-body-outset,
  .centered.l-body-outset,
  dt-article.centered .l-body-outset {
    margin-left: auto;
    margin-right: auto;
    width: calc(648px + 96px);
  }
  dt-article.centered > h1,
  dt-article.centered section > h1,
  dt-article section.centered > h1,
  .centered .l-middle,
  .centered.l-middle,
  dt-article.centered .l-middle {
    width: 816px;
    margin-left: auto;
    margin-right: auto;
  }

  .centered .l-middle-outset,
  .centered.l-middle-outset,
  dt-article.centered .l-middle-outset {
    width: calc(816px + 96px);
    margin-left: auto;
    margin-right: auto;
  }

  /* page and screen are already centered */

  /* Side */

  .centered .side.l-body,
  .centered dt-article .side.l-body {
    clear: both;
    float: right;
    margin-top: 0;
    margin-left: 48px;
    margin-right: calc((100vw - 648px) / 2);
    width: calc(4 * 60px + 3 * 24px);
  }
  .centered .side.l-body-outset,
  .centered dt-article .side.l-body-outset {
    clear: both;
    float: right;
    margin-top: 0;
    margin-left: 48px;
    margin-right: calc((100vw - 648px) / 2);
    width: calc(4 * 60px + 3 * 24px);
  }
  .centered .side.l-middle,
  .centered dt-article .side.l-middle {
    clear: both;
    float: right;
    width: 396px;
    margin-left: 48px;
    margin-right: calc((100vw - 984px) / 2 + 168px / 2);
  }
  .centered .side.l-middle-outset,
  .centered dt-article .side.l-middle-outset {
    clear: both;
    float: right;
    width: 456px;
    margin-left: 48px;
    margin-right: calc((100vw - 984px) / 2 + 168px);
  }
  .centered .side.l-page,
  .centered dt-article .side.l-page {
    clear: both;
    float: right;
    width: 480px;
    margin-right: calc((100vw - 984px) / 2);
  }
  .centered .side.l-page-outset,
  .centered dt-article .side.l-page-outset {
    clear: both;
    float: right;
    width: 480px;
    margin-right: calc((100vw - 984px) / 2);
  }
  .centered .l-gutter,
  .centered.l-gutter,
  dt-article.centered .l-gutter {
    clear: both;
    float: right;
    margin-top: 0;
    margin-left: 24px;
    margin-right: calc((100vw - 984px) / 2);
    width: calc((984px - 648px) / 2 - 24px);
  }

}

/* Rows and Columns */

.row {
  display: flex;
}
.column {
  flex: 1;
  box-sizing: border-box;
  margin-right: 24px;
  margin-left: 24px;
}
.row > .column:first-of-type {
  margin-left: 0;
}
.row > .column:last-of-type {
  margin-right: 0;
}
dt-article {
  display: block;
  color: rgba(0, 0, 0, 0.8);
  font: 17px/1.55em -apple-system, BlinkMacSystemFont, "Roboto", sans-serif;
  padding-bottom: 72px;
  background: white;
}

@media(min-width: 1024px) {
  dt-article {
    font-size: 20px;
  }
}

/* H1 */

dt-article h1 {
  margin-top: 18px;
  font-weight: 400;
  font-size: 40px;
  line-height: 1em;
  font-family: HoeflerText-Regular, Cochin, Georgia, serif;
}
@media(min-width: 768px) {
  dt-article h1 {
    font-size: 46px;
    margin-top: 48px;
    margin-bottom: 12px;
  }
}

@media(min-width: 1080px) {
  .centered h1 {
    text-align: center;
  }

  dt-article h1 {
    font-size: 50px;
    letter-spacing: -0.02em;
  }

  dt-article > h1:first-of-type,
  dt-article section > h1:first-of-type {
    margin-top: 80px;
  }
}


@media(min-width: 1200px) {
  dt-article h1 {
    font-size: 56px;
  }

  dt-article > h1:first-of-type {
    margin-top: 100px;
  }
}

/* H2 */

dt-article h2 {
  font-family: HoeflerText-Regular, Cochin, Georgia, serif;
  font-weight: 400;
  font-size: 26px;
  line-height: 1.25em;
  margin-top: 36px;
  margin-bottom: 24px;
}

@media(min-width: 1024px) {
  dt-article h2 {
    margin-top: 48px;
    font-size: 30px;
  }
}

dt-article h1 + h2 {
  font-weight: 300;
  font-size: 20px;
  line-height: 1.4em;
  margin-top: 8px;
  font-style: normal;
}


@media(min-width: 1080px) {
  .centered h1 + h2 {
    text-align: center;
  }
  dt-article h1 + h2 {
    margin-top: 12px;
    font-size: 24px;
  }
}

/* H3 */

dt-article h3 {
  font-family: HoeflerText-Regular, Georgia, serif;
  font-weight: 400;
  font-size: 20px;
  line-height: 1.4em;
  margin-top: 36px;
  margin-bottom: 18px;
  font-style: italic;
}

dt-article h1 + h3 {
  margin-top: 48px;
}

@media(min-width: 1024px) {
  dt-article h3 {
    font-size: 26px;
  }
}

/* H4 */

dt-article h4 {
  font-weight: 600;
  text-transform: uppercase;
  font-size: 14px;
  line-height: 1.4em;
}

dt-article a {
  color: inherit;
}

dt-article p,
dt-article ul,
dt-article ol {
  margin-bottom: 24px;
  font-family: Georgia, serif;
}

dt-article p b,
dt-article ul b,
dt-article ol b {
  -webkit-font-smoothing: antialiased;
}

dt-article a {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  text-decoration: none;
}

dt-article a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.8);
}

dt-article .link {
  text-decoration: underline;
  cursor: pointer;
}

dt-article ul,
dt-article ol {
  padding-left: 24px;
}

dt-article li {
  margin-bottom: 24px;
  margin-left: 0;
  padding-left: 0;
}

dt-article pre {
  font-size: 14px;
  margin-bottom: 20px;
}


dt-article hr {
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  margin-top: 60px;
  margin-bottom: 60px;
}

dt-article section {
  margin-top: 60px;
  margin-bottom: 60px;
}

/* Tables */

dt-article table {
  border-collapse: collapse;
}

dt-article table th {
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

dt-article table td {
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

dt-article table th,
dt-article table td {
  font-size: 15px;
  padding: 2px 0;
}

/* Figure */

dt-article figure {
  position: relative;
  margin-top: 30px;
  margin-bottom: 30px;
}

@media(min-width: 1024px) {
  dt-article figure {
    margin-top: 48px;
    margin-bottom: 48px;
  }
}

dt-article figure img {
  width: 100%;
}

dt-article figure svg text,
dt-article figure svg tspan {
}

dt-article figure figcaption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}
@media(min-width: 1024px) {
  dt-article figure figcaption {
    font-size: 13px;
  }
}

dt-article figure.external img {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

dt-article figure figcaption a {
  color: rgba(0, 0, 0, 0.6);
}

dt-article span.equation-mimic {
  font-family: georgia;
  font-size: 115%;
  font-style: italic;
}

dt-article figure figcaption b {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

dt-article > dt-code,
dt-article section > dt-code  {
  display: block;
}

dt-article .citation {
  color: #668;
  cursor: pointer;
}

dt-include {
  width: auto;
  display: block;
}
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code {
  white-space: nowrap;
  background: rgba(0, 0, 0, 0.04);
  border-radius: 2px;
  padding: 4px 7px;
  font-size: 15px;
  color: rgba(0, 0, 0, 0.6);
}

pre code {
  display: block;
  background: white;
  border-left: 3px solid rgba(0, 0, 0, 0.05);
  padding: 0 0 0 24px;
}


code[class*="language-"],
pre[class*="language-"] {
  text-shadow: 0 1px white;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
  text-shadow: none;
  background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
  text-shadow: none;
  background: #b3d4fc;
}

@media print {
  code[class*="language-"],
  pre[class*="language-"] {
  text-shadow: none;
  }
}

/* Code blocks */
pre[class*="language-"] {
  overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: slategray;
}

.token.punctuation {
  color: #999;
}

.namespace {
  opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
  color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
  color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
  color: #a67f59;
  background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
  color: #07a;
}

.token.function {
  color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
  color: #e90;
}

.token.important,
.token.bold {
  font-weight: bold;
}
.token.italic {
  font-style: italic;
}

.token.entity {
  cursor: help;
}

@media print {
  @page {
    size: 8in 11in;
  }
  html {
  }
  p, code {
    page-break-inside: avoid;
  }
  h2, h3 {
    page-break-after: avoid;
  }
  dt-header {
    visibility: hidden;
  }
  dt-footer {
    display: none!important;
  }
}
</style>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA99JREFUeNrsG4t1ozDMzQSM4A2ODUonKBucN2hugtIJ6E1AboLcBiQTkJsANiAb9OCd/OpzMWBJBl5TvaeXPiiyJetry0J8wW3D3QpjRh3GjneXDq+fSQA9s2mH9x3KDhN4foJfCb8N/Jrv+2fnDn8vLRQOplWHVYdvHZYdZsBcZP1vBmh/n8DzEmhUQDPaOuP9pFuY+JwJHwHnCLQE2tnWBGEyXozY9xCUgHMhhjE2I4heVWtgIkZ83wL6Qgxj1obfWBxymPwe+b00BCCRNPbwfb60yleAkkBHGT5AEehIYz7eJrFDMF9CvH4wwhcGHiHMneFvLDQwlwvMLQq58trRcYBWfYn0A0OgHWQUSu25mE+BnoYKnnEJoeIWAifzOv7vLWd2ZKRfWAIme3tOiUaQ3UnLkb0xj1FxRIeEGKaGIHOs9nEgLaaA9i0JRYo1Ic67wJW86KSKE/ZAM8KuVMk8ITVhmxUxJ3Cl2xlm9Vtkeju1+mpCQNxaEGNCY8bs9X2YqwNoQeGjBWut/ma0QAWy/TqAsHx9wSya3I5IRxOfTC+leG+kA/4vSeEcGBtNUN6byhu3+keEZCQJUNh8MAO7HL6H8pQLnsW/Hd4T4lv93TPjfM7A46iEEqbB5EDOvwYNW6tGNZzT/o+CZ6sqZ6wUtR/wf7mi/VL8iNciT6rHih48Y55b4nKCHJCCzb4y0nwFmin3ZEMIoLfZF8F7nncFmvnWBaBj7CGAYA/WGJsUwHdYqVDwAmNsUgAx4CGgAA7GOOxADYOFWOaIKifuVYzmOpREqA21Mo7aPsgiY1PhOMAmxtR+AUbYH3Id2wc0SAFIQTsn9IUGWR8k9jx3vtXSiAacFxTAGakBk9UudkNECd6jLe+6HrshshvIuC6IlLMRy7er+JpcKma24SlE4cFZSZJDGVVrsNvitQhQrDhW0jfiOLfFd47C42eHT56D/BK0To+58Ahj+cAT8HT1UWlfLZCCd/uKawzU0Rh2EyIX/Icqth3niG8ybNroezwe6khdCNxRN+l4XGdOLVLlOOt2hTRJlr1ETIuMAltVTMz70mJrkdGAaZLSmnBEqmAE32JCMmuTlCnRgsBENtOUpHhvvsYIL0ibnBkaC6QvKcR7738GKp0AKnim7xgUSNv1bpS8QwhBt8r+EP47v/oyRK/S34yJ9nT+AN0Tkm4OdB9E4BsmXM3SnMlRFUrtp6IDpV2eKzdYvF3etm3KhQksbOLChGkSmcBdmcEwvqkrMy5BzL00NZeu3qPYJOOuCc+5NjcWKXQxFvTa3NoXJ4d8in7fiAUuTt781dkvuHX4K8AA2Usy7yNKLy0AAAAASUVORK5CYII=">
    <link href="https://distill.pub/rss.xml" rel="alternate" type="application/rss+xml" title="Articles from Distill">
    <link rel="canonical" href="http://distill.pub/2016/misread-tsne">
    <title>How to Use t-SNE Effectively</title>
  
    <!--  https://schema.org/Article -->
    <meta property="article:published" itemprop="datePublished" content="2016-10-13">
    <meta property="article:created" itemprop="dateCreated" content="Thu Oct 13 2016 13:00:00 GMT-0700 (Pacific Daylight Time)">
    <meta property="article:modified" itemprop="dateModified" content="Tue May 22 2018 11:21:13 GMT-0700 (Pacific Daylight Time)">
  
      <meta property="article:author" content="Martin Wattenberg">
      <meta property="article:author" content="Fernanda Viégas">
      <meta property="article:author" content="Ian Johnson">
    <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="How to Use t-SNE Effectively">
    <meta property="og:description" content="Although extremely useful for visualizing high-dimensional data, t-SNE plots can sometimes be mysterious or misleading.">
    <meta property="og:url" content="http://distill.pub/2016/misread-tsne">
    <meta property="og:image" content="http://distill.pub/2016/misread-tsne/thumbnail.jpg">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="Distill">
  
    <!--  https://dev.twitter.com/cards/types/summary -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="How to Use t-SNE Effectively">
    <meta name="twitter:description" content="Although extremely useful for visualizing high-dimensional data, t-SNE plots can sometimes be mysterious or misleading.">
    <meta name="twitter:url" content="http://distill.pub/2016/misread-tsne">
    <meta name="twitter:image" content="http://distill.pub/2016/misread-tsne/thumbnail.jpg">
    <meta name="twitter:image:width" content="560">
    <meta name="twitter:image:height" content="295">
  
      <!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
    <meta name="citation_title" content="How to Use t-SNE Effectively">
    <meta name="citation_volume" content="1">
    <meta name="citation_issue" content="10">
    <meta name="citation_firstpage" content="e2">
    <meta name="citation_doi" content="10.23915/distill.00002">
    <meta name="citation_journal_title" content="Distill">
    <meta name="citation_journal_abbrev" content="Distill">
    <meta name="citation_issn" content="2476-0757">
    <meta name="citation_fulltext_world_readable" content="">
    <meta name="citation_online_date" content="2016/10/13">
    <meta name="citation_publication_date" content="2016/10/13">
    <meta name="citation_author" content="Wattenberg, Martin">
    <meta name="citation_author_institution" content="Google Brain">
    <meta name="citation_author" content="Viégas, Fernanda">
    <meta name="citation_author_institution" content="Google Brain">
    <meta name="citation_author" content="Johnson, Ian">
    <meta name="citation_author_institution" content="Google Cloud">
    <meta name="citation_reference" content="citation_title=Visualizing data using t-SNE;citation_author=Laurens van der Maaten;citation_author=Geoffrey Hinton;citation_publication_date=2008;citation_journal_title=Journal of Machine Learning Research;citation_volume=9;citation_number=Nov;">
</head><body class="vsc-initialized" data-new-gr-c-s-check-loaded="8.899.0" data-gr-ext-installed=""><dt-header>
<style>
dt-header {
  display: block;
  position: relative;
  height: 60px;
  background-color: hsl(200, 60%, 15%);
  width: 100%;
  box-sizing: border-box;
  z-index: 2;
  color: rgba(0, 0, 0, 0.8);
  border-bottom: 1px solid rgba(0, 0, 0, 0.08);
  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.05);
}
dt-header .content {
  height: 70px;
}
dt-header a {
  font-size: 16px;
  height: 60px;
  line-height: 60px;
  text-decoration: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 22px 0;
}
dt-header a:hover {
  color: rgba(255, 255, 255, 1);
}
dt-header svg {
  width: 24px;
  position: relative;
  top: 4px;
  margin-right: 2px;
}
@media(min-width: 1080px) {
  dt-header {
    height: 70px;
  }
  dt-header a {
    height: 70px;
    line-height: 70px;
    padding: 28px 0;
  }
  dt-header .logo {
  }
}
dt-header svg path {
  fill: none;
  stroke: rgba(255, 255, 255, 0.8);
  stroke-width: 3px;
}
dt-header .logo {
  font-size: 17px;
  font-weight: 200;
}
dt-header .nav {
  float: right;
  font-weight: 300;
}
dt-header .nav a {
  font-size: 12px;
  margin-left: 24px;
  text-transform: uppercase;
}
</style>

<div class="content l-page">
  <a href="https://distill.pub/" class="logo">
    <svg viewBox="-607 419 64 64">
  <path d="M-573.4,478.9c-8,0-14.6-6.4-14.6-14.5s14.6-25.9,14.6-40.8c0,14.9,14.6,32.8,14.6,40.8S-565.4,478.9-573.4,478.9z"></path>
</svg>

    Distill
  </a>
  <div class="nav">
    <a href="https://distill.pub/about/">About</a>
    <a href="https://distill.pub/prize/">Prize</a>
    <a href="https://distill.pub/journal/">Submit</a>
  </div>
</div>
</dt-header><dt-include src="assets/tray.html"><style>
  #tray-container {
    width: 100%;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 100;
    top: -410px;
    transition: top 0.3s;
  }
  #tray {
    position: relative;
    border: 2px solid steelblue;
    background: white;
    padding: 24px 24px 60px 24px;
    box-shadow: 0px 2px 24px rgba(0, 0, 0, 0.2);
    box-sizing: border-box;
    margin: 0 auto;
    height: 380px;
    display: flex;
    justify-content: center;
    max-width: 700px;
    border-radius: 4px;
  }

  #tray-container.modal {
    top: -4px;
  }

  #tray-content {
    width: 55%;
    height: 100%;
    font-size: 12px;
    position: relative;
    top: -12px;
  }
  #tray-content canvas {
    width: 100%;
  }

  #tray-options {
    padding-left: 36px;
    font-size: 13px;
    line-height: 1.5em;
    height: 100%;
    width: 45%;
  }
  #tray-options #tray-controls {
    margin-bottom: 24px;
    display: flex;
    align-items: center;
  }
  #tray-controls button {
    cursor: pointer;
    outline: none;
    border-radius: 50%;
    background: steelblue;
    color: white;
    width: 48px;
    height: 48px;
    border: none;
    margin-right: 12px;
  }
  #tray-controls .play-pause i {
    display: none;
    font-size: 30px;
  }
  #tray-controls .play-pause.paused i:nth-child(1) {
    display: block;
  }
  #tray-controls .play-pause.playing i:nth-child(2) {
    display: block;
  }
  #tray-steps-display {
    text-align: center;
    width: 48px;
    font-size: 15px;
  }
  #tray input {
    margin-bottom: 12px;
    margin-left: -2px;
  }
  #tray-data-sliders {
  }
  #tray-tsne-sliders {
  }
  #tray-close {
    cursor: pointer;
    outline: none;
    background: white;
    border: none;
    text-align: center;
    position: absolute;
    bottom: 0;
    width: 100%;
    padding: 6px 0;
    background: #f0f4f5;
    opacity: 0.6;
    color: steelblue;
    left: 0;
  }
  #tray-close:hover {
    opacity: 1;
  }
</style>
<div id="tray-container">
  <div id="tray">
    <div id="tray-content">
      <canvas width="400" height="400"></canvas>
    </div>

    <div id="tray-options">
      <div id="tray-controls">
        <button class="play-pause">
          <i class="material-icons">play_arrow</i>
          <i class="material-icons">pause</i>
        </button>
        <button class="restart">
          <i class="material-icons">refresh</i>
        </button>
        <div id="tray-steps-display">
          Step: <br> <span class="step"></span>
        </div>
      </div>
      <div id="tray-data-sliders"></div>
      <div id="tray-tsne-sliders"></div>
    </div>
    <button id="tray-close"><i class="material-icons">expand_less</i></button>
  </div>
</div>
<script>
// This depends on playground.js having setup the GLOBAL object
  function runTrayState() {
    // Set up t-SNE and start it running.
    var state = GLOBALS.trayState;
    var points = state.demo.generator.apply(null, state.demoParams);
    var canvas = d3.select("#tray-content canvas").node()

    // if there was already a playground demo going, lets destroy it and make a new one
    if(GLOBALS.trayDemo) {
      GLOBALS.trayDemo.destroy();
      delete GLOBALS.trayDemo;
    }
    GLOBALS.trayDemo = demoMaker(points, canvas, state, function(step) {
      d3.select("#tray-controls .step").text(step);
      if(step >= state.stepLimit && !GLOBALS.trayUnpausedBefore) {
        setTrayRunning(false)
      }
    })

    GLOBALS.trayUnpausedBefore = false;
    setTrayRunning(true);
  }

  function updateTraySliders() {
    // we regenerate all the sliders from scratch
    // we modify the global tray state when a slider is modified
    var state = GLOBALS.trayState;
    var dataSliders = d3.select('#tray-data-sliders');
    dataSliders.html('');
    state.demo.options.map(function(option, i) {
      var value = state.demoParams[i];
      var slider = makeTraySlider(dataSliders.node(), option.name,
        option.min, option.max, value, function() {
          // when this one updates we change the appropriate state
          GLOBALS.trayState.demoParams[i] = +slider.value
          runTrayState();
        });
    });

    var tsneSliders = d3.select('#tray-tsne-sliders');
    tsneSliders.html('');
    var perpSlider = makeTraySlider(tsneSliders.node(), "Perplexity",
        1, 100, state.perplexity, function() {
          GLOBALS.trayState.perplexity = perpSlider.value
          runTrayState();
        });

    var epsSlider = makeTraySlider(tsneSliders.node(), "Epsilon",
        1, 20, state.epsilon, function() {
          GLOBALS.trayState.epsilon = epsSlider.value
          runTrayState();
        });

  }

  function makeTraySlider(container, name, min, max, start, changeCallback) {
    var dis = d3.select(container)
    dis.append("span").classed("slider-label-" + name, true)
      .text(name + ' ')
    var value = dis.append("span").classed("slider-value-" + name, true)
      .text(start)

    var slider = dis.append("input")
      .attr("type", "range")
      .attr("min", min)
      .attr("max", max)
      .attr("value", start)
      .on("change", changeCallback)
      .on("input", function() {
        value.text(slider.node().value);
      })
    return slider.node();
  }

  /* Activate the tray */
  function updateStateFromFigure(figure, example, el) {
    var y = el.getBoundingClientRect().top;
    var demo = demosByName[figure.dataset];
    var state = {
      demo: demos[demo.index],
      demoParams: figure.params.map(function(d) { return d}),
      perplexity: example.perplexity,
      epsilon: example.epsilon,
      stepLimit: example.step
    }
    GLOBALS.trayState = state;
    runTrayState()
    updateTraySliders()
    d3.select("#tray-container").classed("modal", true)
    GLOBALS.trayOpen = true;
  }

  d3.select("body").on("keydown", function() {
    if(d3.event.keyCode === 27) {
      setTrayRunning(false)
      d3.select("#tray-container").classed("modal", false);
      d3.selectAll(".runner").classed("selected", false);
    }
  })
  d3.select("#tray-close").on("click", function() {
    setTrayRunning(false);
    GLOBALS.trayOpen = false;
    d3.select("#tray-container").classed("modal", false)
    d3.selectAll(".runner").classed("selected", false);
  })

  /* Tray Controls */
  var trayPlay = d3.select("#tray-controls .play-pause")
  function setTrayRunning(r) {
    GLOBALS.running = r;
    if (GLOBALS.running) {
      GLOBALS.trayDemo.unpause();
      trayPlay
        .classed("playing", true)
        .classed("paused", false);
    } else {
      GLOBALS.trayDemo.pause();
      trayPlay
        .classed("playing", false)
        .classed("paused", true);
    }
  }

  // Hook up play / pause / restart buttons.
  trayPlay.on("click", function() {
    GLOBALS.trayUnpausedBefore = true;
    setTrayRunning(!GLOBALS.running);
  });

  var trayRestart = d3.select("#tray-controls .restart")
    .on("click", function() {
      runTrayState();
    })

  d3.select(window).on("scroll.tray", function() {
    if(GLOBALS.trayOpen) {
      if(scrollY < 1000) {
        setTrayRunning(false);
        GLOBALS.trayOpen = false;
        d3.select("#tray-container").classed("modal", false);
        d3.selectAll(".runner").classed("selected", false);
      }
    }
  });
  /* Tray sliders */
</script>
</dt-include>

<dt-article>
  <h1 class="l-middle">How to Use t-SNE Effectively</h1>
  <h2 class="l-middle">Although extremely useful for visualizing 
high-dimensional data, t-SNE plots can sometimes be mysterious or 
misleading. By exploring how it behaves in simple cases, we can learn to
 use it more effectively.</h2>
  <div class="l-page">
    <dt-include src="assets/playground.html"><style>
  #playground {
    overflow: hidden;
    font-family: 'Open Sans', sans-serif;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    /*border-bottom: 1px solid rgba(0, 0, 0, 0.1);*/
    margin-top: 36px;
    padding: 36px 0 0 0;
    /*background: #fcfcfc;*/
    z-index: 1000;
  }

  #playground * {
    box-sizing: border-box;
  }

  #playground.modal {
    position: fixed;
    left: 10px;
    right: 10px;
    top: 50px;
  }

  /* Playground Canvas */
  #playground-canvas {
    float: left;
    width: 55%;
  }

  #playground-canvas canvas {
    width: 100%;
  }

  /* Data Menu */
  #data-menu {
    /*float: left;*/
    /*width: 25%*/
    width: 40%;
    float: left;
    margin-bottom: 24px;
    overflow: hidden;
    margin-left: 5%;
  }
  #data-menu .demo-data {
    cursor: pointer;
    position: relative;
    font-size: 10px;
    line-height: 1.2em;
    box-sizing: border-box;
    float: left;
    margin: 2px;
    padding: 4px;
    width: calc(33% - 4px);
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    border-radius: 4px;
    box-shadow: 0 0 3px rgba(0, 0, 0, 0.08);
  }
  @media(min-width: 480px) {
    #data-menu .demo-data {
      width: calc(25% - 8px);
      padding: 8px;
      margin: 4px;
    }
  }
  @media(min-width: 768px) {
    #data-menu .demo-data {
      width: calc(16.5% - 8px);
      padding: 8px;
      margin: 4px;
    }
  }
  #data-menu .demo-data:hover {
  border: 1px solid rgba(0, 0, 0, 0.2);

  }
  #data-menu .demo-data.selected::after {
    content: "";
    border: 2px solid rgba(70, 130, 180, 0.8);
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    box-sizing: border-box;
    border-radius: 4px;
  }
  #data-menu .demo-data span {
    display: none;
  }
  #data-menu .demo-data:hover canvas {
    opacity: 1;
  }
  #data-menu .demo-data canvas {
    width: 100%;
    opacity: 0.3;
  }
  #data-menu .demo-data.selected canvas {
    opacity: 1;
  }

  /* Data Details */
  #data-details {
    position: relative;
  }

  @media(min-width: 768px) {
    #data-details {
      width: 40%;
      float: right;
    }
  }

  #data-details #data-controls {
    width: 40%;
    float: right;
    position: relative;
    overflow: hidden;
    font-size: 13px;
  }

  @media(min-width: 768px) {
    #data-details #data-controls {
      width: 50%;
      margin-right: 10%;
      float: left;
    }
  }

  #data-details #play-controls {
    margin-bottom: 18px;
    overflow: hidden;
    position: relative;
  }
  #data-details #play-controls button {
    cursor: pointer;
    outline: none;
    border-radius: 50%;
    background: steelblue;
    color: white;
    width: 25%;
    margin-right: 5%;
    padding-top: 25%;
    padding-bottom: 0;
    border: none;
    float: left;
    position: relative;
  }
  #play-controls i {
    display: block;
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    height: 36px;
    font-size: 24px;
    line-height: 0;
  }
  @media(min-width: 768px) {
    #play-controls i {
      font-size: 30px;
    }
  }
  #play-controls #play-pause i {
    display: none;
    position: absolute;
  }
  #play-controls #play-pause.paused i:nth-child(1) {
    display: block;
  }
  #play-controls #play-pause.playing i:nth-child(2) {
    display: block;
  }

  #steps-display {
    float: left;
    text-align: center;
    width: 25%;
    line-height: 1.5em;
    font-size: 13px;
  }

  @media(min-width: 1024px) {
    #steps-display {
      font-size: 16px;
      line-height: 1.6em;
    }
  }
  #data-details #data-description {
    width: 50%;
    margin-right: 10%;
    float: right;
    font-size: 14px;
    line-height: 1.6em;
  }

  @media(min-width: 768px) {
    #data-details #data-description {
      width: 40%;
      float: left;
      margin-right: 0;
    }
  }

  /* Options */
  #data-details #options {
    float: left;
    padding-left: 36px;
    font-size: 13px;
    line-height: 1.5em;
    width: 45%;
  }
  #data-details input {
    display: block;
    width: 100%;
    margin: 8px 0 16px 0;
  }

  #options #data-options {
    width: 45%;
    margin-left: 4px;
  }
  #options #tsne-options {
    width: 45%;
    margin-left: 4px;
  }

  #data-details #share {
    margin-top: 8px;
    display: block;
    color: rgba(0, 0, 0, 0.4);
    text-decoration: none;
    font-size: 12px;
  }

  #data-details #share:hover {
    text-decoration: underline;
  }

  #data-details #share i {
    line-height: 0px;
    position: relative;
    top: 7px;
  }

</style>
<div id="playground">

  <div id="playground-canvas">
    <canvas id="output" width="600" height="600"></canvas>
  </div>

  <div id="data-menu"><div class="demo-data selected"><canvas width="150" height="150"></canvas><span>Grid</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Two Clusters</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Three Clusters</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Two Different-Sized Clusters</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Two Long Linear Clusters</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Cluster In Cluster</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Circle (Evenly Spaced)</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Circle (Randomly Spaced)</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Gaussian Cloud</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Ellipsoidal Gaussian Cloud</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Trefoil Knot</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Linked Rings</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Unlinked Rings</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Orthogonal Steps</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Random Walk</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Random Jump</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Equally Spaced</span></div><div class="demo-data"><canvas width="150" height="150"></canvas><span>Uniform Distribution</span></div></div>

  <div id="data-details">
    <div id="data-controls">
      <div id="play-controls">
        <button id="play-pause" class="paused"><i class="material-icons">play_arrow</i><i class="material-icons">pause</i></button>
        <button id="restart"><i class="material-icons">refresh</i></button>
        <div id="steps-display">
          Step<br><span id="step">102</span>
        </div>
      </div>
      <div id="data-options"><span class="slider-label-Points Per Side">Points Per Side </span><span class="slider-value-Points Per Side">20</span><input type="range" min="2" max="20" value="20"></div>
      <div id="tsne-options"><span class="slider-label-Perplexity">Perplexity </span><span class="slider-value-Perplexity">10</span><input type="range" min="2" max="100" value="10"><span class="slider-label-Epsilon">Epsilon </span><span class="slider-value-Epsilon">5</span><input type="range" min="1" max="20" value="5"></div>
    </div>
    <div id="data-description">
      <span>A square grid with equal spacing between points. Try convergence at different sizes.</span>
      <a id="share" style="display: none;" href="#perplexity=10&amp;epsilon=5&amp;demo=0&amp;demoParams=20"><i class="material-icons">link</i> Share this view</a>
    </div>
  </div>


</div>
<script src="How%20to%20Use%20t-SNE%20Effectively_files/playground.js"></script>
</dt-include>
  </div>
  <dt-byline>
<style>
  dt-byline {
    font-size: 12px;
    line-height: 18px;
    display: block;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0, 0, 0, 0.5);
    padding-top: 12px;
    padding-bottom: 12px;
  }
  dt-article.centered dt-byline {
    text-align: center;

  }
  dt-byline a,
  dt-article dt-byline a {
    text-decoration: none;
    border-bottom: none;
  }
  dt-article dt-byline a:hover {
    text-decoration: underline;
    border-bottom: none;
  }
  dt-byline .authors {
    text-align: left;
  }
  dt-byline .name {
    display: inline;
    text-transform: uppercase;
  }
  dt-byline .affiliation {
    display: inline;
  }
  dt-byline .date {
    display: block;
    text-align: left;
  }
  dt-byline .year, dt-byline .month {
    display: inline;
  }
  dt-byline .citation {
    display: block;
    text-align: left;
  }
  dt-byline .citation div {
    display: inline;
  }

  @media(min-width: 768px) {
    dt-byline {
    }
  }

  @media(min-width: 1080px) {
    dt-byline {
      border-bottom: none;
      margin-bottom: 70px;
    }

    dt-byline a:hover {
      color: rgba(0, 0, 0, 0.9);
    }

    dt-byline .authors {
      display: inline-block;
    }

    dt-byline .author {
      display: inline-block;
      margin-right: 12px;
      /*padding-left: 20px;*/
      /*border-left: 1px solid #ddd;*/
    }

    dt-byline .affiliation {
      display: block;
    }

    dt-byline .author:last-child {
      margin-right: 0;
    }

    dt-byline .name {
      display: block;
    }

    dt-byline .date {
      border-left: 1px solid rgba(0, 0, 0, 0.1);
      padding-left: 15px;
      margin-left: 15px;
      display: inline-block;
    }
    dt-byline .year, dt-byline .month {
      display: block;
    }

    dt-byline .citation {
      border-left: 1px solid rgba(0, 0, 0, 0.15);
      padding-left: 15px;
      margin-left: 15px;
      display: inline-block;
    }
    dt-byline .citation div {
      display: block;
    }
  }
</style>


<div class="byline">
  <div class="authors">
    <div class="author">
        <a class="name" href="http://hint.fm/">Martin Wattenberg</a>
          <a class="affiliation" href="http://g.co/brain">Google Brain</a>
    </div>
    <div class="author">
        <a class="name" href="http://hint.fm/">Fernanda Viégas</a>
          <a class="affiliation" href="http://g.co/brain">Google Brain</a>
    </div>
    <div class="author">
        <a class="name" href="http://enjalot.github.io/">Ian Johnson</a>
          <a class="affiliation" href="http://cloud.google.com/">Google Cloud</a>
    </div>
  </div>
  <div class="date">
    <div class="month">Oct. 13</div>
    <div class="year">2016</div>
  </div>
  <a class="citation" href="#citation">
    <div>Citation:</div>
    <div>Wattenberg, et al., 2016</div>
  </a>
</div>
</dt-byline>
  <p>A popular method for exploring high-dimensional data is something called t-SNE, introduced by <dt-cite key="maaten2008visualizing"><span id="citation-0" data-hover-ref="dt-cite-hover-box-0">van der Maaten and Hinton in 2008 <span class="citation-number">[1]</span></span></dt-cite>.
 The technique has become widespread in the field of machine learning, 
since it has an almost magical ability to create compelling 
two-dimensonal “maps” from data with hundreds or even thousands of 
dimensions.
Although impressive, these images can be tempting to misread. The 
purpose of this note is to prevent some common misreadings.</p>

  <p>We’ll walk through a series of simple examples to illustrate what 
t-SNE diagrams can and cannot show. The t-SNE technique really is 
useful—but only if you know how to interpret it.</p>

  <p>Before diving in: if you haven’t encountered t-SNE before, here’s 
what you need to know about the math behind it. The goal is to take a 
set of points in a high-dimensional space and find a faithful 
representation of those points in a lower-dimensional space, typically 
the 2D plane. The algorithm is non-linear and adapts to the underlying 
data, performing different transformations on different regions. Those 
differences can be a major source of confusion.</p>

  <p>A second feature of t-SNE is a tuneable parameter, “perplexity,” 
which says (loosely) how to balance attention between local and global 
aspects of your data. The parameter is, in a sense, a guess about the 
number of close neighbors each point has. The perplexity value has a 
complex effect on the resulting pictures. The original paper says, <em>“The performance of SNE is fairly robust to changes in the perplexity, and typical values are between 5 and 50.”</em>
 But the story is more nuanced than that. Getting the most from t-SNE 
may mean analyzing multiple plots with different perplexities.</p>

  <p>That’s not the end of the complications. The t-SNE algorithm 
doesn’t always produce similar output on successive runs, for example, 
and there are additional hyperparameters related to the optimization 
process.</p>

  <hr>

  <h2>1. Those hyperparameters really matter</h2>

  <p>Let’s start with the “hello world” of t-SNE: a data set of two 
widely separated clusters. To make things as simple as possible, we’ll 
consider clusters in a 2D plane, as shown in the lefthand diagram. (For 
clarity, the two clusters are color coded.) The diagrams at right show 
t-SNE plots for five different perplexity values.</p>

  <div class="l-page-outset tsne-group" id="figures-01" data-id="01">
  <div class="original"><div class="image"><img class="tsne-plot" src="How%20to%20Use%20t-SNE%20Effectively_files/figure_01_original.png"></div><h3 class="caption">Original</h3></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_01_01.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 2</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_01_02.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 5</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_01_03.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 30</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_01_04.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 50</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_01_05.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 100</div><div>Step: 5,000</div></div></div></div>

  <p>With perplexity values in the range (5 - 50) suggested by van der 
Maaten &amp; Hinton, the diagrams do show these clusters, although with 
very different shapes. Outside that range, things get a little weird. 
With perplexity 2, local variations dominate. The image for perplexity 
100, with merged clusters, illustrates a pitfall: for the algorithm to 
operate properly, the perplexity really should be smaller than the 
number of points. Implementations can give unexpected behavior 
otherwise.</p>

  <p>Each of the plots above was made with 5,000 iterations with a 
learning rate (often called “epsilon”) of 10, and had reached a point of
 stability by step 5,000. How much of a difference do those values make?
 In our experience, the most important thing is to iterate until 
reaching a stable configuration.</p>

  <div class="l-page-outset tsne-group" id="figures-02" data-id="02">
  <div class="original"><div class="image"><img class="tsne-plot" src="How%20to%20Use%20t-SNE%20Effectively_files/figure_02_original.png"></div><h3 class="caption">Original</h3></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_02_01.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 30</div><div>Step: 10</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_02_02.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 30</div><div>Step: 20</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_02_03.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 30</div><div>Step: 60</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_02_04.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 30</div><div>Step: 120</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_02_05.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 30</div><div>Step: 1,000</div></div></div></div>

  <p>The images above show five different runs at perplexity 30. The 
first four were stopped before stability. After 10, 20, 60, and 120 
steps you can see layouts with seeming 1-dimensional and even pointlike 
images of the clusters. If you see a t-SNE plot with strange “pinched” 
shapes, chances are the process was stopped too early. Unfortunately, 
there’s no fixed number of steps that yields a stable result. Different 
data sets can require different numbers of iterations to converge.</p>

  <p>Another natural question is whether different runs with the same 
hyperparameters produce the same results. In this simple two-cluster 
example, and most of the others we discuss, multiple runs give the same 
global shape. Certain data sets, however, yield markedly different 
diagrams on different runs; we’ll give an example of one of these later.</p>

  <p>From now on, unless otherwise stated, we’ll show results from 5,000
 iterations. That’s generally enough for convergence in the (relatively 
small) examples in this essay. We’ll keep showing a range of 
perplexities, however, since that seems to make a big difference in 
every case.</p>

  <hr>

  <h2>2. Cluster sizes in a t-SNE plot mean nothing</h2>

  <p>So far, so good. But what if the two clusters have different 
standard deviations, and so different sizes? (By size we mean bounding 
box measurements, not number of points.) Below are t-SNE plots for a 
mixture of Gaussians in plane, where one is 10 times as dispersed as the
 other.</p>

  <div class="l-page-outset tsne-group" id="figures-03" data-id="03">
  <div class="original"><div class="image"><img class="tsne-plot" src="How%20to%20Use%20t-SNE%20Effectively_files/figure_03_original.png"></div><h3 class="caption">Original</h3></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_03_01.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 2</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_03_02.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 5</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_03_03.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 30</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_03_04.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 50</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_03_05.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 100</div><div>Step: 5,000</div></div></div></div>

  <p>Surprisingly, the two clusters look about same size in the t-SNE 
plots.
  What’s going on? The t-SNE algorithm adapts its notion of “distance” 
to regional density variations in the data set. As a result, it 
naturally expands dense clusters, and contracts sparse ones, evening out
 cluster sizes. To be clear, this is a different effect than the 
run-of-the-mill fact that any dimensionality reduction technique will 
distort distances. (After all, in this example all data was 
two-dimensional to begin with.) Rather, density equalization happens by 
design and is a predictable feature of t-SNE.</p>

  <p>The bottom line, however, is that you cannot see relative sizes of clusters in a t-SNE plot.</p>

  <hr>

  <h2>3. Distances between clusters might not mean anything</h2>

  <p>What about distances <em>between</em> clusters? The next diagrams show three Gaussians of 50 points each, one pair being 5 times as far apart as another pair.</p>

  <div class="l-page-outset tsne-group" id="figures-04" data-id="04">
  <div class="original"><div class="image"><img class="tsne-plot" src="How%20to%20Use%20t-SNE%20Effectively_files/figure_04_original.png"></div><h3 class="caption">Original</h3></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_04_01.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 2</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_04_02.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 5</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_04_03.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 30</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_04_04.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 50</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_04_05.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 100</div><div>Step: 5,000</div></div></div></div>

  <p>At perplexity 50, the diagram gives a good sense of the global 
geometry. For lower perplexity values the clusters look equidistant. 
When the perplexity is 100, we see the global geometry fine, but one of 
the cluster appears, falsely, much smaller than the others.
  Since perplexity 50 gave us a good picture in this example, can we 
always set perplexity to 50 if we want to see global geometry?</p>

  <p>Sadly, no. If we add more points to each cluster, the perplexity 
has to increase to compensate. Here are the t-SNE diagrams for three 
Gaussian clusters with 200 points each, instead of 50. Now none of the 
trial perplexity values gives a good result.</p>

  <div class="l-page-outset tsne-group" id="figures-05" data-id="05">
  <div class="original"><div class="image"><img class="tsne-plot" src="How%20to%20Use%20t-SNE%20Effectively_files/figure_05_original.png"></div><h3 class="caption">Original</h3></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_05_01.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 2</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_05_02.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 5</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_05_03.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 30</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_05_04.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 50</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_05_05.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 100</div><div>Step: 5,000</div></div></div></div>

  <p>It’s bad news that seeing global geometry requires fine-tuning 
perplexity. Real-world data would probably have multiple clusters with 
different numbers of elements. There may not be one perplexity value 
that will capture distances across all clusters—and sadly perplexity is a
 global parameter. Fixing this problem might be an interesting area for 
future research.</p>

  <p>The basic message is that distances between well-separated clusters in a t-SNE plot may mean nothing.</p>

  <hr>

  <h2>4. Random noise doesn’t always look random.</h2>

  <p>A classic pitfall is thinking you see patterns in what is really 
just random data. Recognizing noise when you see it is a critical skill,
 but it takes time to build up the right intuitions. A tricky thing 
about t-SNE is that it throws a lot of existing intuition out the 
window.
  The next diagrams show genuinely random data, 500 points drawn from a 
unit Gaussian distribution in 100 dimensions. The left image is a 
projection onto the first two coordinates.</p>

  <div class="l-page-outset tsne-group" id="figures-06" data-id="06">
  <div class="original"><div class="image"><img class="tsne-plot" src="How%20to%20Use%20t-SNE%20Effectively_files/figure_06_original.png"></div><h3 class="caption">Original</h3></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_06_01.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 2</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_06_02.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 5</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_06_03.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 30</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_06_04.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 50</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_06_05.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 100</div><div>Step: 5,000</div></div></div></div>

  <p>The plot with perplexity 2 seems to show dramatic clusters. If you 
were tuning perplexity to bring out structure in the data, you might 
think you’d hit the jackpot.</p>

  <p>Of course, since we know the cloud of points was generated 
randomly, it has no statistically interesting clusters: those “clumps” 
aren’t meaningful. If you look back at previous examples, low perplexity
 values often lead to this kind of distribution. Recognizing these 
clumps as random noise is an important part of reading t-SNE plots.</p>

  <p>There’s something else interesting, though, which may be a win for 
t-SNE. At first the perplexity 30 plot doesn’t look like a Gaussian 
distribution at all: there’s only a slight density difference across 
different regions of the cloud, and the points seem suspiciously evenly 
distributed. In fact, these features are saying useful things about 
high-dimensional normal distributions, which are very close to uniform 
distributions on a sphere: evenly distributed, with roughly equal spaces
 between points. Seen in this light, the t-SNE plot is more accurate 
than any linear projection could be.</p>

  <hr>

  <h2>5. You can see some shapes, sometimes</h2>

  <p>It’s rare for data to be distributed in a perfectly symmetric way. 
Let’s take a look at an axis-aligned Gaussian distribution in 50 
dimensions, where the standard deviation in coordinate i is 1/i. That 
is, we’re looking at a long-ish ellipsoidal cloud of points.</p>

  <div class="l-page-outset tsne-group" id="figures-07" data-id="07">
  <div class="original"><div class="image"><img class="tsne-plot" src="How%20to%20Use%20t-SNE%20Effectively_files/figure_07_original.png"></div><h3 class="caption">Original</h3></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_07_01.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 2</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_07_02.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 5</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_07_03.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 30</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_07_04.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 50</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_07_05.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 100</div><div>Step: 5,000</div></div></div></div>

  <p>For high enough perplexity values, the elongated shapes are easy to
 read. On the other hand, at low perplexity, local effects and 
meaningless “clumping” take center stage. More extreme shapes also come 
through, but again only at the right perplexity. For example, here are 
two clusters of 75 points each in 2D, arranged in parallel lines with a 
bit of noise.</p>

  <div class="l-page-outset tsne-group" id="figures-08" data-id="08">
  <div class="original"><div class="image"><img class="tsne-plot" src="How%20to%20Use%20t-SNE%20Effectively_files/figure_08_original.png"></div><h3 class="caption">Original</h3></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_08_01.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 2</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_08_02.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 5</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_08_03.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 30</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_08_04.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 50</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_08_05.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 100</div><div>Step: 5,000</div></div></div></div>

  <p>For a certain range of perplexity the long clusters look close to correct, which is reassuring.</p>

  <p>Even in the best cases, though, there’s a subtle distortion: the 
lines are slightly curved outwards in the t-SNE diagram. The reason is 
that, as usual, t-SNE tends to expand denser regions of data. Since the 
middles of the clusters have less empty space around them than the ends,
 the algorithm magnifies them.</p>

  <hr>

  <h2>6. For topology, you may need more than one plot</h2>

  <p>Sometimes you can read topological information off a t-SNE plot, 
but that typically requires views at multiple perplexities.
  One of the simplest topological properties is containment. The plots 
below show two groups of 75 points in 50 dimensional space. Both are 
sampled from symmetric Gaussian distributions centered at the origin, 
but one is 50 times more tightly dispersed than the other. The “small” 
distribution is in effect contained in the large one.</p>

  <div class="l-page-outset tsne-group" id="figures-09" data-id="09">
  <div class="original"><div class="image"><img class="tsne-plot" src="How%20to%20Use%20t-SNE%20Effectively_files/figure_09_original.png"></div><h3 class="caption">Original</h3></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_09_01.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 2</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_09_02.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 5</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_09_03.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 30</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_09_04.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 50</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_09_05.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 100</div><div>Step: 5,000</div></div></div></div>

  <p>The perplexity 30 view shows the basic topology correctly, but 
again t-SNE greatly exaggerates the size of the smaller group of points.
 At perplexity 50, there’s a new phenomenon: the outer group becomes a 
circle, as the plot tries to depict the fact that all its points are 
about the same distance from the inner group. If you looked at this 
image alone, it would be easy to misread these outer points as a 
one-dimensional structure.</p>

  <p>What about more complicated types of topology? This may be a 
subject dearer to mathematicians than to practical data analysts, but 
interesting low-dimensional structures are occasionally found in the 
wild.</p>

  <p>Consider a set of points that trace a link or a knot in three 
dimensions. Once again, looking at multiple perplexity values gives the 
most complete picture. Low perplexity values give two completely 
separate loops; high ones show a kind of global connectivity.</p>

  <div class="l-page-outset tsne-group" id="figures-10" data-id="10">
  <div class="original"><div class="image"><img class="tsne-plot" src="How%20to%20Use%20t-SNE%20Effectively_files/figure_10_original.png"></div><h3 class="caption">Original</h3></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_10_01.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 2</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_10_02.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 5</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_10_03.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 30</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_10_04.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 50</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_10_05.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 100</div><div>Step: 5,000</div></div></div></div>
  <div class="l-page-outset tsne-group" id="figures-11" data-id="11">
  <div class="original"><div class="image"><img class="tsne-plot" src="How%20to%20Use%20t-SNE%20Effectively_files/figure_11_original.png"></div><h3 class="caption">Original</h3></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_11_01.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 2</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_11_02.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 5</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_11_03.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 30</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_11_04.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 50</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_11_05.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 100</div><div>Step: 5,000</div></div></div></div>

  <p>The trefoil knot is an interesting example of how multiple runs 
affect the outcome of t-SNE. Below are five runs of the perplexity-2 
view.</p>

  <p>The algorithm settles twice on a circle, which at least preserves 
the intrinsic topology. But in three of the runs it ends up with three 
different solutions which introduce artificial breaks. Using the dot 
color as a guide, you can see that the first and third runs are far from
 each other.</p>

  <div class="l-page-outset tsne-group" id="figures-12" data-id="12">
  <div class="original"><div class="image"><img class="tsne-plot" src="How%20to%20Use%20t-SNE%20Effectively_files/figure_12_original.png"></div><h3 class="caption">Original</h3></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_12_01.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 2</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_12_02.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 2</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_12_03.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 2</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_12_04.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 2</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_12_05.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 2</div><div>Step: 5,000</div></div></div></div>

  <p>Five runs at perplexity 50, however, give results that (up to 
symmetry) are visually identical. Evidently some problems are easier 
than others to optimize.</p>

  <div class="l-page-outset tsne-group" id="figures-13" data-id="13">
  <div class="original"><div class="image"><img class="tsne-plot" src="How%20to%20Use%20t-SNE%20Effectively_files/figure_13_original.png"></div><h3 class="caption">Original</h3></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_13_01.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 50</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_13_02.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 50</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_13_03.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 50</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_13_04.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 50</div><div>Step: 5,000</div></div></div><div class="runner clickable"><div class="image"><img src="How%20to%20Use%20t-SNE%20Effectively_files/figure_13_05.png"></div><i class="material-icons">open_in_browser</i><div class="caption"><div>Perplexity: 50</div><div>Step: 5,000</div></div></div></div>

  <hr>

  <h2>Conclusion</h2>

  <p>There’s a reason that t-SNE has become so popular: it’s incredibly 
flexible, and can often find structure where other 
dimensionality-reduction algorithms cannot. Unfortunately, that very 
flexibility makes it tricky to interpret. Out of sight from the user, 
the algorithm makes all sorts of adjustments that tidy up its 
visualizations.
  Don’t let the hidden “magic” scare you away from the whole technique, 
though. The good news is that by studying how t-SNE behaves in simple 
cases, it’s possible to develop an intuition for what’s going on.</p>


  <!-- bring the figures to life -->
  <dt-include src="assets/tsne-group.html"><style>

.tsne-group {
  overflow: visible;
  display: -webkit-flex;
  display: flex;
  flex-direction: column;
  margin-top: 36px;
  margin-bottom: 36px;
}

@media(min-width: 640px) {
  .tsne-group {
    -webkit-flex-direction: row;
    flex-direction: row;
  }
}

.tsne-group .original,
.tsne-group .runner {
  box-sizing: border-box;
  -webkit-flex-grow: 1;
  flex-grow: 1;
  position: relative;
  display: -webkit-flex;
  display: flex;
  margin-bottom: 12px;
}

.tsne-group .original {
  position: relative;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding-bottom: 12px;
}

@media(min-width: 640px) {
  .tsne-group .original,
  .tsne-group .runner {
    display: block;
    width: 100%;
    margin-bottom: 0;
  }

  .tsne-group .original {
    margin-left: 0;
    padding-right: 12px;
    border-right: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: none;
    padding-bottom: 0;
  }

  .tsne-group .runner {
    margin-left: 12px;
  }
}

.tsne-group .runner.no-click {
  cursor: default;
}

.runner.clickable {
  cursor: pointer;
}

.runner.clickable:hover .image {
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
}

.runner:hover i {
  opacity: 1;
}

.runner.selected i {
  opacity: 1;
}

.runner i {
  font-size: 30px;
  position: absolute;
  top: 1px;
  left: 1px;
  background-color: hsla(207, 44%, 79%, 0.8);
  color: steelblue;
  border-radius: 4px;
  opacity: 0;
  transition: opacity 0.3s;
  line-height: 0;
  width: 150px;
  padding: 75px 0;
  text-align: center;
}

@media(min-width: 640px) {
  .runner i {
    width: 100%;
    padding: 50% 0;
  }
}

.runner.selected .image::after {
  content: "";
  border: 2px solid rgba(70, 130, 180, 1);
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  box-sizing: border-box;
  border-radius: 4px;
  z-index: 10;
}

.tsne-group .image {
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  box-shadow: 0 0 6px rgba(0, 0, 0, 0.08);
  width: 150px;
  padding-top: 150px;
  background: white;
  position: relative;
  transition: border-color 0.3s, box-shadow 0.3s;
  margin-right: 12px;
}

@media(min-width: 640px) {
  .tsne-group .image {
    width: 100%;
    padding-top: 100%;
    margin-right: 0;
  }
}

.tsne-group .original .image {
  box-shadow: none;
}

.tsne-group .image img {
  position: absolute;
  top: 5%;
  left: 5%;
  width: 90%;
}

.tsne-group h3.caption {
  font-size: 15px;
  margin-top: 12px;
}

.tsne-group .caption {
  font-size: 12px;
  line-height: 1.6em;
  margin-top: 12px;
  width: 100px;
}

@media(min-width: 640px) {
  .tsne-group .caption,
  .tsne-group h3.caption {
    margin-top: 8px;
    width: 100%;
  }
}
</style>

<script>
(function() {
  var format = d3.format(",");
  d3.selectAll(".tsne-group").data(figures, function(d) {
    if(!d) return this.dataset.id;
    return d.id
  })
  .each(generateFigure)

  function generateFigure(figure) {

    var FIGURE = figure.id
    var dis = d3.select(this)
    var original = dis.append("div").classed("original", true)
    original.append("div")
        .classed("image", true)
      .append("img")
        .classed("tsne-plot", true)
        .attr("src", "assets/figure_" + FIGURE + "_" + "original.png");
    original.append("h3").classed("caption", true).text("Original")

    // examples
    var runners = dis.selectAll(".runner").data(figure.examples)
      .enter().append("div").classed("runner", true)
    if(!figure.noclick) {
      runners
        .classed("clickable", true)
        .on("click", function(d) {
          d3.selectAll(".runner").classed("selected", false)
          updateStateFromFigure(figure, d, this);
          d3.select(this).classed("selected", true)
        });
    } else {
      runners.classed("no-click", true)
    }

    runners.append("div")
        .classed("image", true)
      .append("img")
        .attr("src", function(d,i) {
          return "assets/figure_" + FIGURE + "_" + d.id + ".png"
        });

    if(!figure.noclick) {
      runners.append("i")
        .classed("material-icons", true)
        .text("open_in_browser")
    }

    var caption = runners.append("div").classed("caption", true);

    caption.append("div").text(function(d) { return "Perplexity: " + format(d.perplexity); })

    caption.append("div").text(function(d) { return "Step: " + format(d.step); })
  }
})()
</script>
</dt-include>

</dt-article>
<dt-appendix>
<style>
  dt-appendix {
    display: block;
    font-size: 14px;
    line-height: 24px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0,0,0,0.1);
    color: rgba(0,0,0,0.5);
    background: rgb(250, 250, 250);
    padding-top: 36px;
    padding-bottom: 60px;
  }
  dt-appendix h3 {
    font-size: 16px;
    font-weight: 500;
    margin-top: 18px;
    margin-bottom: 18px;
    color: rgba(0,0,0,0.65);
  }
  dt-appendix .citation {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
  }
  dt-appendix .references {
    font-size: 12px;
    line-height: 20px;
  }
  dt-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }
  dt-appendix ol,
  dt-appendix ul {
    padding-left: 24px;
  }
</style>

<div class="l-body">

  <h3>Acknowledgments</h3>
  <p>We are grateful to Chris Olah and Shan Carter for creating this platform, and for excellent design and editorial
     help from Shan Carter.
     Daniel Smilkov, James Wexler, and Chi Zeng provided many helpful comments.
     We also thank Andrej Karpathy for creating the
     <a href="https://github.com/karpathy/tsnejs">tsnejs</a> library used in the interactive diagrams.</p>
  <p>This work was made possible by the support of the <a href="https://research.google.com/teams/brain/">Google Brain</a> team.</p>

  <p>Edited on Oct. 18, 2016 to describe and correct issues when 
perplexity is defined to be larger than the number of points. Thanks to 
Laurens van der Maaten for pointing this out.</p>

<h3>References</h3><dt-bibliography><ol><li><b>Visualizing data using t-SNE</b>   <a href="http://www.jmlr.org/papers/volume9/vandermaaten08a/vandermaaten08a.pdf">[PDF]</a><br>Maaten, L.v.d. and Hinton, G., 2008. Journal of Machine Learning Research, Vol 9(Nov), pp. 2579—2605. </li></ol></dt-bibliography><h3>Updates and Corrections</h3>
    <p><a href="https://github.com/distillpub/post--misread-tsne/compare/de6941fa8fc6c4db9d8e4b4f4d7f604817db562c...f2492b469bec8aaa7aa83cc828081e14a295414d">View all changes</a> to this article since it was first published. If you see a mistake or want to suggest a change, please <a class="github-issue" href="https://github.com/distillpub/post--misread-tsne/issues/new">create an issue on GitHub</a>.</p><h3 id="citation">Citations and Reuse</h3>
    <p>Diagrams and text are licensed under Creative Commons Attribution <a href="https://creativecommons.org/licenses/by/2.0/">CC-BY 2.0</a>, unless noted otherwise, with the <a class="github" href="https://github.com/distillpub/post--misread-tsne">source available on GitHub</a>.
 The figures that have been reused from other sources don't fall under 
this license and can be recognized by a note in their caption: “Figure 
from …”.</p>

    <p>For attribution in academic contexts, please cite this work as</p>
    <pre class="citation short">Wattenberg, et al., "How to Use t-SNE Effectively", Distill, 2016. http://doi.org/10.23915/distill.00002</pre>

    <p>BibTeX citation</p>
<pre class="citation long">@article{wattenberg2016how,
  author = {Wattenberg, Martin and Viégas, Fernanda and Johnson, Ian},
  title = {How to Use t-SNE Effectively},
  journal = {Distill},
  year = {2016},
  url = {http://distill.pub/2016/misread-tsne},
  doi = {10.23915/distill.00002}
}</pre></div>
</dt-appendix>

<script type="text/bibliography">
@article{maaten2008visualizing,
  title={Visualizing data using t-SNE},
  author={Maaten, Laurens van der and Hinton, Geoffrey},
  journal={Journal of Machine Learning Research},
  volume={9},
  number={Nov},
  pages={2579--2605},
  year={2008},
  url={http://www.jmlr.org/papers/volume9/vandermaaten08a/vandermaaten08a.pdf}
}
</script>

<style>
    dt-cite {
      color: hsla(206, 90%, 20%, 0.7);
    }
    dt-cite .citation-number {
      cursor: default;
      white-space: nowrap;
      font-family: -apple-system, BlinkMacSystemFont, "Roboto", Helvetica, sans-serif;
      font-size: 75%;
      color: hsla(206, 90%, 20%, 0.7);
      display: inline-block;
      line-height: 1.1em;
      text-align: center;
      position: relative;
      top: -2px;
      margin: 0 2px;
    }
    figcaption dt-cite .citation-number {
      font-size: 11px;
      font-weight: normal;
      top: -2px;
      line-height: 1em;
    }
  </style><div id="cite-hover-boxes-container"><div style="display:none;" class="dt-hover-box" id="dt-cite-hover-box-0"><b>Visualizing data using t-SNE</b>  <a href="http://www.jmlr.org/papers/volume9/vandermaaten08a/vandermaaten08a.pdf">[PDF]</a><br>L.v.d. Maaten, G. Hinton.<br>Journal of Machine Learning Research, Vol 9(Nov), pp. 2579—2605. 2008. </div></div><div id="footnote-hover-boxes-container"></div><script>

function nodeFromString(str) {
  var div = document.createElement("div");
  div.innerHTML = str;
  return div.firstChild;
}

function make_hover_css(pos) {
  var pretty = window.innerWidth > 600;
  var padding = pretty? 18 : 12;
  var outer_padding = pretty ? 18 : 0;
  var bbox = document.querySelector("body").getBoundingClientRect();
  var left = pos[0] - bbox.left, top = pos[1] - bbox.top;
  var width = Math.min(window.innerWidth-2*outer_padding, 648);
  left = Math.min(left, window.innerWidth-width-outer_padding);
  width = width - 2*padding;
  return (`position: absolute;
     background-color: #FFF;
     opacity: 0.95;
     max-width: ${width}px;
     top: ${top}px;
     left: ${left}px;
     border: 1px solid rgba(0, 0, 0, 0.25);
     padding: ${padding}px;
     border-radius: ${pretty? 3 : 0}px;
     box-shadow: 0px 2px 10px 2px rgba(0, 0, 0, 0.2);
     z-index: ${1e6};`);
}


function DtHoverBox(div_id) {
  this.div = document.querySelector("#"+div_id);
  this.visible = false;
  this.bindDivEvents();
  DtHoverBox.box_map[div_id] = this;
}

DtHoverBox.box_map = {};

DtHoverBox.get_box = function get_box(div_id) {
  if (div_id in DtHoverBox.box_map) {
    return DtHoverBox.box_map[div_id];
  } else {
    return new DtHoverBox(div_id);
  }
}

DtHoverBox.prototype.show = function show(pos){
  this.visible = true;
  this.div.setAttribute("style", make_hover_css(pos) );
  for (var box_id in DtHoverBox.box_map) {
    var box = DtHoverBox.box_map[box_id];
    if (box != this) box.hide();
  }
}

DtHoverBox.prototype.showAtNode = function showAtNode(node){
    var bbox = node.getBoundingClientRect();
    this.show([bbox.right, bbox.bottom]);
}

DtHoverBox.prototype.hide = function hide(){
  this.visible = false;
  if (this.div) this.div.setAttribute("style", "display:none");
  if (this.timeout) clearTimeout(this.timeout);
}

DtHoverBox.prototype.stopTimeout = function stopTimeout() {
  if (this.timeout) clearTimeout(this.timeout);
}

DtHoverBox.prototype.extendTimeout = function extendTimeout(T) {
  //console.log("extend", T)
  var this_ = this;
  this.stopTimeout();
  this.timeout = setTimeout(function(){this_.hide();}.bind(this), T);
}

// Bind events to a link to open this box
DtHoverBox.prototype.bind = function bind(node) {
  if (typeof node == "string"){
    node = document.querySelector(node);
  }

  node.addEventListener("mouseover", function(){
    if (!this.visible) this.showAtNode(node);
    this.stopTimeout();
  }.bind(this));

  node.addEventListener("mouseout", function(){this.extendTimeout(250);}.bind(this));

  node.addEventListener("touchstart", function(e) {
    if (this.visible) {
      this.hide();
    } else {
      this.showAtNode(node);
    }
    // Don't trigger body touchstart event when touching link
    e.stopPropagation();
  }.bind(this));
}

DtHoverBox.prototype.bindDivEvents = function bindDivEvents(){
  // For mice, same behavior as hovering on links
  this.div.addEventListener("mouseover", function(){
    if (!this.visible) this.showAtNode(node);
    this.stopTimeout();
  }.bind(this));
  this.div.addEventListener("mouseout", function(){this.extendTimeout(250);}.bind(this));

  // Don't trigger body touchstart event when touching within box
  this.div.addEventListener("touchstart", function(e){e.stopPropagation();});
  // Close box when touching outside box
  document.body.addEventListener("touchstart", function(){this.hide();}.bind(this));
}

var hover_es = document.querySelectorAll("span[data-hover-ref]");
hover_es = [].slice.apply(hover_es);
hover_es.forEach(function(e,n){
  var ref_id = e.getAttribute("data-hover-ref");
  DtHoverBox.get_box(ref_id).bind(e);
})
</script><dt-footer>
<style>
dt-footer {
  display: block;
  color: rgba(255, 255, 255, 0.4);
  font-weight: 300;
  padding: 40px 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  background-color: hsl(200, 60%, 15%);
  text-align: center;
}
dt-footer .logo svg {
  width: 24px;
  position: relative;
  top: 4px;
  margin-right: 2px;
}
dt-footer .logo svg path {
  fill: none;
  stroke: rgba(255, 255, 255, 0.8);
  stroke-width: 3px;
}
dt-footer .logo {
  font-size: 17px;
  font-weight: 200;
  color: rgba(255, 255, 255, 0.8);
  text-decoration: none;
  margin-right: 6px;
}
dt-footer .nav {
  margin-top: 12px;
}
dt-footer .nav a {
  color: rgba(255, 255, 255, 0.8);
  margin-right: 6px;
}
</style>

<div class="l-page">
  <div class="description">
  <a href="https://distill.pub/" class="logo">
    <svg viewBox="-607 419 64 64">
  <path d="M-573.4,478.9c-8,0-14.6-6.4-14.6-14.5s14.6-25.9,14.6-40.8c0,14.9,14.6,32.8,14.6,40.8S-565.4,478.9-573.4,478.9z"></path>
</svg>

    Distill
  </a>
  is dedicated to clear explanations of machine learning
  </div>
  <div class="nav">
    <a href="http://distill.pub/about/">About</a>
    <a href="http://distill.pub/journal/">Submit</a>
    <a href="http://distill.pub/prize/">Prize</a>
    <a href="http://distill.pub/archive/">Archive</a>
    <a href="http://distill.pub/rss.xml">RSS</a>
    <a href="https://github.com/distillpub">GitHub</a>
    <a href="https://twitter.com/distillpub">Twitter</a>
    &nbsp;&nbsp;&nbsp;&nbsp; ISSN 2476-0757
  </div>
</div>
</dt-footer><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-83741880-1', 'auto');
  ga('send', 'pageview');
</script></body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>